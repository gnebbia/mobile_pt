!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=15)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(7),r=i(3),o=i(19),s=i(2),a=i(4),d=function(){function e(){}return e.buildBrowsiOutput=function(t){t.debugMode&&(window.browsiOutput=Object.assign(window.browsiOutput||{},t||{},{getFiredEvents:r.EventsService.getFiredEvents,f:e,getStayAwayElements:a.default.instance.getStayAwayElementsList}))},e.querySelector=function(e,t){if(e)try{return document.querySelector(e)}catch(i){t("Invalid selector ["+e+"]")}return null},e.getLoaderParams=function(){return window._middyo},e.isEmptyObj=function(e){return 0===Object.keys(e).length},e.querySelectorAll=function(e,t){return e&&e.length?e.reduce(function(e,i){var n=[];try{n=Array.from(document.querySelectorAll(i))}catch(e){t("Invalid selector ["+i+"]")}return e.concat(n)},new Array):[]},e.isElement=function(e){return e&&e instanceof Element},e.getPositionFallback=function(t){if(!t)return 0;var i=e.getElementPosition(t).y;if("none"!==t.style.display&&i>0)return i;for(var n,r=t.previousElementSibling;r;){if(n=e.getElementPosition(r).y,"none"!==r.style.display&&n>0)return r.getBoundingClientRect().height+n;r=r.previousElementSibling}return this.getPositionFallback(t.parentElement)},e.getElementPosition=function(e){var t={y:-1,x:-1};return e&&this.isElement(e)?t=this.getPosition(e):t},e.getPosition=function(e,t){void 0===t&&(t=!1);var i=e.getBoundingClientRect(),n=document.body,r=document.documentElement,o=t?window.pageYOffset||r.scrollTop||n.scrollTop:this.getPageYOffset(),s=window.pageXOffset||r.scrollLeft||n.scrollLeft,a=r.clientTop||n.clientTop||0,d=r.clientLeft||n.clientLeft||0,l=i.top+o-a,c=i.left+s-d;return{y:Math.round(l),x:Math.round(c)}},e.isDescendantElement=function(e,t){for(var i=0,n=e;i<n.length;i++){var r=n[i];if(this.isContainedElement(r,t))return!0}return!1},e.isContainedElement=function(e,t){return!(!e||!t)&&!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)},e.getElementSize=function(e){return{h:e.getBoundingClientRect().height,w:e.getBoundingClientRect().width}},e.getViewportHeight=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},e.getViewportWidth=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},e.getElementFoldNumber=function(t){var i=document.body.getBoundingClientRect(),n=(t.getBoundingClientRect().top-i.top+o.FixedHeaderService.get().getNoneFixedHeaderSize())/e.getViewportHeight()+1;return Number(n.toFixed(2))},e.getScreenSize=function(){var e=window.top;return{w:e.screen.availWidth||e.screen.width,h:e.screen.availHeight||e.screen.height}},e.getPageWidth=function(){var e=window.top.document,t=e.body,i=e.documentElement;return Math.floor(Math.max(t.scrollWidth,t.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth))},e.getPageHeight=function(){var e=window.top.document,t=e.body,i=e.documentElement;return Math.floor(Math.max(t.scrollHeight,t.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight))},e.getElementCoordinates=function(e){var t=e.getBoundingClientRect(),i=document.body,n=document.documentElement,r=window.top.pageYOffset||n.scrollTop||i.scrollTop,s=window.top.pageXOffset||n.scrollLeft||i.scrollLeft,a=n.clientTop||i.clientTop||0,d=n.clientLeft||i.clientLeft||0,l=t.top+r-a+o.FixedHeaderService.get().getNoneFixedHeaderSize(),c=t.left+s-d;return{top:Math.round(l),left:Math.round(c)}},e.isVisible=function(t){var i=t;return e.isElement(i)&&null!==i.offsetParent&&i.getBoundingClientRect().height>1&&"0"!==window.getComputedStyle(i).opacity},e.calculateDistanceBetween=function(t,i){var n=0;if(t&&i&&t!==i){var r=e.sortElementsByDomOrder(t,i);n=e.getElementCoordinates(r.lower).top-e.getElementCoordinates(r.upper).top,e.isDescendantElement([r.upper],r.lower)||(n-=e.getElementSize(r.upper).h)}return n},e.calculateTextNodeHeight=function(t){var i=e.nextVisibleSibling(t),n=e.nextVisibleSibling(t,!0);if(i){if(t.nodeValue&&n)return e.calculateDistanceBetween(n,i)}else if(t.parentElement&&n){var r=t.parentElement.getBoundingClientRect(),o=n.getBoundingClientRect();return r.top+r.height-(o.top+o.height)}return 0},e.nextVisibleSibling=function(t,i){for(var n=i?t.previousElementSibling:t.nextElementSibling;n&&!e.isVisible(n);)n=i?n.previousElementSibling:n.nextElementSibling;return n},e.sortElementsByDomOrder=function(t,i){return e.getElementCoordinates(t).top<e.getElementCoordinates(i).top?{upper:t,lower:i}:{upper:i,lower:t}},e.getHighestElement=function(e,t){return this.sortElementsByDomOrder(e,t).upper},e.getMaxWrapSize=function(e){var t=e.filter(function(e){return e.optionalEmbeddings.includes("wrapped")});return t.length?t.reduce(function(e,t){return e.h>t.h?e:t}):{w:0,h:0}},e.isFloatImage=function(e){if("IMG"!==e.nodeName)return!1;var t=window.getComputedStyle(e);return"right"===t.getPropertyValue("float")||"left"===t.getPropertyValue("float")},e.isParagraphElement=function(e){return"P"===e.nodeName},e.isEmptyParagraph=function(e){return!(!this.isParagraphElement(e)||n.isNullOrUndefined(e.textContent))&&0===e.textContent.replace(/\s*/,"").length},e.isPositionContained=function(e,t){return!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)},e.isPositionOrderAs=function(e,t){return!n.isUndefined(t)&&!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING)},e.isPositionFixed=function(e){return"fixed"===window.getComputedStyle(e).position||!!e.parentElement&&this.isPositionFixed(e.parentElement)},e.removeElementsPositionedAfter=function(t,i){return n.isNullOrUndefined(t)?i:i.filter(function(i){return e.isPositionOrderAs(i,t)})},e.toUrlParams=function(e){return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")},e.onIframeLoad=function(e,t){if(e.contentWindow&&"complete"===e.contentWindow.document.readyState)t();else var i=window.setInterval(function(){e.contentWindow&&"complete"===e.contentWindow.document.readyState&&(window.clearInterval(i),t())},100)},e.getMarginTopBySpotStyle=function(e,t,i){i=i.previousElementSibling&&"break"===t?i.previousElementSibling:e.ref;var n=window.getComputedStyle(i),r=16,o=n.margin.split(" ");if(n.margin){var s=Number(o[0].replace("px",""));r="break"===t?r-s:s}else if(n.marginTop){s=Number(n.marginTop.replace("px",""));r="break"===t?r-s:s}return(isNaN(r)||r<0)&&(r=16),r},e.findSizeInSpot=function(e,t){return e.compatibleSizes.find(function(e){return e.w===+t.w&&e.h===+t.h})},e.getDfpEventSize=function(e){return e.size?{w:e.size[0],h:e.size[1]}:{w:-1,h:-1}},e.appendScript=function(e,t){return new Promise(function(i,n){var r=document.createElement("script");r.async=!0,r.setAttribute("src",e),r.addEventListener("load",function(){i("success")}),r.addEventListener("error",function(){n("error")}),t.iframe?t.iframe.contentDocument.body.appendChild(r):t.wrapper&&t.wrapper.appendChild(r)})},e.createClass=function(e,t,i){var n=i.createElement("style");n.type="text/css",i.getElementsByTagName("head")[0].appendChild(n),(n.sheet||{}).insertRule?n.sheet.insertRule(e+"{"+t+"}",0):(n.styleSheet||n.sheet).addRule(e,t)},e.buildAdMarking=function(t,i){var n=document.createElement("div");n.innerText=i.text,n.id="browsi_adv_"+t.adIndex;var r=i.color?"height: 16px !important;\npadding: 0 !important;\nfont-family: Arial, sans-serif !important;\nmargin: auto !important;\nmargin-bottom: 10px !important;\ntext-align: center !important;\nline-height: 16px !important;\nfont-weight: normal !important;\ncolor:  "+i.color+" !important;\nfont-size: 11px !important;":i.customStyle?i.customStyle:"";return e.createClass(".browsi_adv_"+t.adIndex,r,document),n.setAttribute("class","browsi_adv_"+t.adIndex),n},e.getScrollPosition=function(){var e=o.FixedHeaderService.get();return{top:window.top.pageYOffset+e.getNoneFixedHeaderSize()+e.getFixedHeaderSize(),bottom:window.top.pageYOffset+window.top.innerHeight}},e.getLogStyle=function(e,t,i){return"font-size:"+e+"px;color:"+t+";background:"+i+";"},e.sortSpotsByOffsetTop=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(e,t){return e.offsetTop-t.offsetTop})},e.sortSpotsByPosition=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.sort(function(t,i){return e.getPositionFallback(t.ref)-e.getPositionFallback(i.ref)})},e.sortElementsByPosition=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t.sort(function(t,i){return e.getPositionFallback(t)-e.getPositionFallback(i)})},e.getCurrentTime=function(e){var t=Date.now();return e?Math.floor(t/1e3):t},e.isFluidSize=function(e){return 0===e.w&&0===e.h},e.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object.assign.apply(Object,[{}].concat(e))},e.getSpotCoords=function(t){return t.isImpression&&t.browsiAd.container?t.browsiAd.iframe?e.getElementCoordinates(t.browsiAd.iframe):e.getElementCoordinates(t.browsiAd.container):e.getElementCoordinates(t.ref)},e.findParentElementByType=function(e,t){for(var i=null,n=0,r=Array.from(document.querySelectorAll(e));n<r.length;n++){var o=r[n];this.isContainedElement(o,t)&&(i=o)}return i},e.isObject=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&null!==e},e.mergeDeep=function(e,t){var i=this;return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(n){var r,o;i.isObject(t[n])?(e[n]||Object.assign(e,((r={})[n]={},r)),i.mergeDeep(e[n],t[n])):Object.assign(e,((o={})[n]=t[n],o))}),e},e.removeSpaces=function(e){return e.replace(/(\n|\r|\s+)/gm,"")},e.getElementOffsetDistanceFromSpot=function(e,t,i){var n=e.parentElement?e.parentElement.getBoundingClientRect().width:e.getBoundingClientRect().width;return i-t.h+t.w*t.h/n},e.getMaxWrappingOffsetDistance=function(t,i){var n=t.parentElement?t.parentElement:t,r=getComputedStyle(n),o=n.getBoundingClientRect().width;o-=parseFloat(r.paddingLeft||"0")+parseFloat(r.paddingRight||"0");var s=e.getWrapFullSize(i);return s.w*s.h/o-s.h},e.isPositionedAfter=function(e,t){return!n.isUndefined(t)&&!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING)},e.getEmbedTypesFromSizes=function(e){for(var t=[],i=!1,n=!1,r=0,o=e;r<o.length;r++)for(var s=0,a=o[r].optionalEmbeddings;s<a.length;s++){var d=a[s];if("break"!==d||n?"wrapped"!==d&&"left"!==d&&"right"!==d||i||(t.push("wrapped"),i=!0):(t.push(d),n=!0),n&&i)return t}return t},e.sizeToString=function(e){return e.w+"x"+e.h},e.isEngagedUser=function(){var t=s.Profiler.get();return!t.engagedUsers.active||(e.getScrollPosition().top>0||t.engagedUsers.engaged)},e.removeElement=function(e){return!(!e||!e.parentElement)&&(e.parentElement.removeChild(e),!0)},e.throttle=function(e,t){var i=!1;return function(n){i||(e(n),i=!0,setTimeout(function(){i=!1,e(n)},t))}},e.getCurrentFoldDecimal=function(){var e=this.getScreenSize();return this.getScrollPosition().top/e.h+1},e.getScrollDepthPercentages=function(){var e=this.getScrollingDistance();return this.getDepthPercentages(e)},e.getScrollingDistance=function(){return this.getPageYOffset()+this.getWindowHeight()},e.getDepthPercentages=function(e){var t=this.getPageHeight()||1;return e=e||0,Math.round(e/t*100)},e.getWindowHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},e.getPageYOffset=function(){return window.pageYOffset||("CSS1Compat"===document.compatMode?document.documentElement.scrollTop:document.body.scrollTop)},e.getNowInSeconds=function(){return Math.floor(Date.now()/1e3)},e.getTimeOffset=function(){return Date.now()-this.getLoaderParams().to},e.getCookie=function(e){var t=encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&"),i=new RegExp("(?:(?:^|.*;)\\s*"+t+"\\s*\\=\\s*([^;]*).*$)|^.*$"),n=document.cookie.replace(i,"$1");return decodeURIComponent(n)||""},e.compareObjectKeys=function(e,t){return JSON.stringify(Object.keys(e))===JSON.stringify(Object.keys(t))},e.getExternalFlowHandler=function(e){var t=s.Profiler.get().rules;if(t&&t[e]&&"function"==typeof t[e])return t[e]},e.toSet=function(e){var t=new Set;return e.forEach(function(e){return t.add(e)}),t},e.toUnique=function(e){var t=[];return this.toSet(e).forEach(function(e){return t.push(e)}),t},e.getMainContentSize=function(t){if(!t||!t.mainContent.lastElement||!t.mainContent.firstElement)return-1;var i=e.getElementCoordinates(t.mainContent.firstElement).top,n=t.mainContent.borderElement?e.getElementCoordinates(t.mainContent.borderElement).top:e.getElementCoordinates(t.mainContent.lastElement).top+t.mainContent.lastElement.getBoundingClientRect().height;return Math.round(n-i)},e.reportNewBrowsiAd=function(e){var t=new CustomEvent("ban",{detail:e});window.top.dispatchEvent(t)},e.reportBrowsiAdRemoved=function(e){var t=new CustomEvent("bar",{detail:e});window.top.dispatchEvent(t)},e.clone=function(e){return JSON.parse(JSON.stringify(e))},e.shouldLookForFixed=function(){var e=this.getLoaderParams();return e.e.fs&&e.e.fs.mi>0},e.getWrapFullSize=function(e){var t=s.Profiler.get().spotsConfig.s,i=t.l.p.r+t.l.p.l>t.r.p.r+t.r.p.l?t.l.p:t.r.p,n=t.l.m.r+t.l.m.l>t.r.m.r+t.r.m.l?t.l.m:t.r.m;return{w:e.w+i.l+n.l+i.r+n.r,h:e.h+i.b+n.b}},e}();t.Utils=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);!function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e.TABLE="table",e.CUSTOM="custom"}(t.LogTypes||(t.LogTypes={}));var r=function(){function e(e){this.loggerSubject=e,this.isActive=!!window._middyo.debug}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logMessage("debug",e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logMessage("info",e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logMessage("error",e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logMessage("warn",e)},e.prototype.table=function(e){if(this.isActive)try{console.table(e)}catch(t){this.info("Table fallback: ",e)}},e.prototype.custom=function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=[{msg:e,style:t,args:i}];this.logMessage("custom",r)},e.prototype.logMessage=function(e,t){this.isActive&&("custom"!==e?console[e].apply(console,["["+this.loggerSubject+"]"].concat(t)):console.info("%c["+this.loggerSubject+"] "+t[0].msg,t[0].style,t[0].args))},e.prototype.logWaterfallDetails=function(e,t,i){e.waterfall=e.waterfall||[];var r="x:"+e.ref.getBoundingClientRect().left+", y:"+e.offsetTop,o=e.selectedSize?n.Utils.sizeToString(e.selectedSize):"null";t.c.c?e.waterfall.push({provider:"header_bidding",adIndex:e.adIndex,adUnit:"-",size:o,position:r,isLazy:e.isLazyLoading,status:i}):(t=t,e.waterfall.push({provider:t.c.p,adIndex:e.adIndex,adUnit:t.c.au,size:o,position:r,isLazy:e.isLazyLoading,status:i})),this.info("Waterfall Table:"),this.table(e.waterfall)},e.prototype.hbLog=function(e,t,i,r,o){if(void 0===r&&(r="None"),this.isActive){console.group("auction result "+t+", winner: %c"+r,"color:green;font-size:20px");var s=e?e[t]:null,a=(s&&s.bids||[]).map(function(e){return{bidder:e.bidder,cpm:e.cpm,size:e.width+"x"+e.height,currency:e.currency}}),d=i.map(function(e){return{bidder:e.bidder,cpm:-1,size:"NA",currency:"NA"}});if(o){var l=n.Utils.getDfpEventSize(o);a.push({bidder:"dfp",cpm:-1,size:l.w+"x"+l.h,currency:-1})}this.table(a.concat(d)),console.groupEnd()}},e}();t.Logger=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(4),s=function(){function e(e){this._profile=this.buildProfile(e,this.getRules(e))}return e.prototype.getRules=function(t){if(t.externalFlowHandler&&t.externalFlowHandler.preEngine){try{e.logger.info("initiating rules"),t.externalFlowHandler.preEngine(t)}catch(t){e.logger.error("failed to initiating rules",t)}return t.externalFlowHandler}},e.get=function(){return e.instance||(e.instance=new e(n.Utils.getLoaderParams())),e.instance._profile},e.prototype.buildProfile=function(e,t){var i=e.e.sc;i.s=n.Utils.mergeDeep(this.getDefaultStyling(),i.s);var r=n.Utils.getScreenSize();return{debugMode:!!e.debug&&e.debug,identity:{siteKey:e.i.sk,publisherKey:e.i.pk,userId:e.i.u,sessionId:e.i.s,pageviewId:e.i.pv,isBenchmarkPageview:e.r.b,bootstrapPageviewId:e.bpvi,supplyConfigId:e.i.sc,url:encodeURIComponent(location.protocol+"//"+location.host+location.pathname),timeOffset:e.to,articleId:e.i.aid},yieldData:{isBenchmarked:e.r.b,countryCode:e.r.cc,trafficSource:e.r.ts,isReturningUser:e.r.ru,version:e.e.v,eventServerUrl:e.r.es,host:e.yhn},deviceDetails:{browser:e.dt.b,device:e.dt.d,deviceType:e.dt.p,os:e.dt.os,osVersion:e.dt.osv,screenWidth:r.w,screenHeight:r.h,browserType:e.dt.bt,deviceVendor:e.dt.v},userShort:e.e.us,referrer:encodeURIComponent(window.top.document.referrer),analysisMode:e.e.am,enableMoat:e.e.em,fixedHeader:e.e.fh,spotsConfig:i,fixedSpotsConfig:e.e.fs,adMarking:this.getAdMarkingConfiguration(e.e.sc.mrk),foldsConfiguration:this.getFoldConfiguration(e.e.fc),state:"bootstrap_loaded",allowNarrowBreak:i.anb||!1,targetSelectors:e.e.ts||[],wrappingAdditionalElements:e.e.wae||[],prebidPath:e.e.pp,prebidData:e.e.pd,adBlockerDetectionUrl:e.e.abd,rules:t,engagedUsers:{engaged:!1,active:e.e.eo},lazySpots:e.e.ls,logEngagement:e.e.le,blockAdRequestOnOOF:e.e.barof,disableSpotAfterTitle:e.e.dts,placementIdMacro:e.e.plidm}},e.buildMainContent=function(t,i,r,o){var s=o.e.mc.u,a={start:-1,width:-1,widthThreshold:r,elements:[],endPosition:-1,inputElements:[],firstElement:null,lastElement:null,borderElement:null};if(t.length){var d=null;o.e.mc.e&&(d=n.Utils.querySelector(o.e.mc.e,this.errorCallback));var l=this.getPotentialSpots(o.e.ts||[],t,d);e.logger.debug("all main content + targetSelector elements: ",l);var c=n.Utils.querySelector(s,this.errorCallback)||t[0],u=t[t.length-1];a={start:n.Utils.getElementCoordinates(c).top,width:i,widthThreshold:r,elements:l,endPosition:d?n.Utils.getElementCoordinates(d).top:n.Utils.getElementCoordinates(u).top+u.getBoundingClientRect().height,inputElements:t,firstElement:c,lastElement:u,borderElement:d}}return a},e.buildFixedAdSizes=function(e,t){var i=this,n=[];return e.forEach(function(e){if(0!==t.length){var r=i.getWidthForEmbed(e),o=i.buildAdSizes(r,t,!0,!1);t=t.filter(function(e){return!o.find(function(t){return t.h===e.h&&t.w===e.w})}),n=n.concat(o)}}),n},e.buildAdSizes=function(e,t,i,r){var o=this,s=[];return t.forEach(function(t){if(e>=t.w||n.Utils.isFluidSize(t)){var a=o.getAdSizeType(t);s.push({w:t.w,h:t.h,adSizeType:a,minSizeForWrapping:o.calculateValidHeights(t,e),optionalEmbeddings:o.getEmbedTypes(a,t.h,i,r)})}}),s},e.getAdSizeType=function(e){return n.Utils.isFluidSize(e)?"wide":e.w<=this.maxNarrowAdWidth?"narrow":"wide"},e.getEmbedTypes=function(e,t,i,n){var r=[];return"narrow"==e?(t<=this.maxNarrowAdHeightForBreak&&i&&r.push("break"),n&&r.push("wrapped")):r.push("break"),r},e.calculateValidHeights=function(e,t){var i=n.Utils.getWrapFullSize(e);return i.h-i.h*i.w/t},e.getSkippedElements=function(e,t,i){return n.Utils.querySelectorAll(e,i).filter(function(e){return t.includes(e)||n.Utils.isDescendantElement(t,e)})},e.validateProfileForBehavior=function(e,t,i){var n=[];return e.start>e.stop&&n.push("startIF/stopIF_Violation"),0===t.length&&n.push("No_compatibleSizes"),0===i.length&&n.push("No_Elements_For_Scan"),n},e.prototype.getFoldConfiguration=function(e){return e.stop>0?e:{start:e.start,stop:1e6}},e.prototype.getAdMarkingConfiguration=function(e){if(e){var t={text:e.t};return e.c?t.color=e.c:e.s&&(t.customStyle=e.s),t}return null},e.getPotentialSpots=function(e,t,i){var r=this.collectMcElements(e,t);return i&&n.Utils.isDescendantElement(t,i)&&(r=n.Utils.removeElementsPositionedAfter(i,r)),r},e.collectMcElements=function(e,t){var i=[];e.length&&(i=t.reduce(function(t,i){return t.concat(Array.from(i.querySelectorAll(""+e.toString())).filter(function(e){return n.Utils.isVisible(e)}))},[]));var r=t.reduce(function(e,t){return e.concat(Array.from(t.querySelectorAll("p")).filter(function(e){return n.Utils.isVisible(e)&&!n.Utils.isDescendantElement(i,e)}))},[]).concat(i).sort(function(e,t){return n.Utils.isPositionedAfter(e,t)?1:-1});return n.Utils.toUnique(r)},e.detectAdBlocker=function(t){e.adBlockerExists?t():new Promise(function(t,i){function n(){"undefined"===window.adblockDetector?t(!1):window.adblockDetector.init({debug:e.get().debugMode,found:function(){t(!0)},notFound:function(){t(!1)}})}var r=document.createElement("script");r.src=e.get().adBlockerDetectionUrl,r.setAttribute("crossorigin","anonymous"),r.onload=n,r.onerror=n,document.body.appendChild(r)}).then(function(i){e.adBlockerExists=i,e.logger.custom("Ad Blocker Detected: "+i,n.Utils.getLogStyle(18,"black","green")),t()})},e.collectDOMData=function(){var t=window._middyo,i=n.Utils.querySelectorAll([t.e.mc.s],e.errorCallback).filter(function(e){return n.Utils.isVisible(e)}),r=o.default.instance.getStayAwayElementsList(),s=this.getSkippedElements(t.e.se,i,e.errorCallback),a=this.getSkippedElements(["div[style*=float] + p, img[style*=float]+p, iframe[style*=float] + p"],i,e.errorCallback),d=this.getWidthForEmbed(i[0]),l=t.e.mc.t?t.e.mc.t:500,c=d>=l,u=t.e.sc.anb||!1,p=t.e.sc.cs||[],f=this.buildAdSizes(d,p,u,c),h=t.e.fs||{},g=h.as&&h.as.length>0?h.as:p,m=n.Utils.sortElementsByPosition.apply(n.Utils,n.Utils.querySelectorAll(h.te||[],e.errorCallback)),y=this.buildFixedAdSizes(m,g);return e.logger.debug("all fixed spots elements: ",m),{mainContent:this.buildMainContent(i,d,l,t),stayAwayElements:r,skippedElements:s,dynamicCompatibleSizes:f,foundFloatElements:a,allowNarrowWrap:c,fixedSpotsElements:m,fixedCompatibleSizes:y}},e.getWidthForEmbed=function(e){var t=e?e.getBoundingClientRect().width:-1;if(n.Utils.isElement(e)){var i=window.getComputedStyle(e);i.paddingLeft&&i.paddingRight&&(t-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight))}return t},e.prototype.getDefaultStyling=function(){return{b:{m:{b:16,t:16}},l:{m:{t:-1,r:16,b:16,l:0},p:{t:-1,r:0,b:0,l:0}},r:{m:{t:-1,r:0,b:16,l:16},p:{t:-1,r:0,b:0,l:0}}}},e.logger=new r.Logger("Profiler"),e.errorCallback=function(t){return e.logger.error(t)},e.maxNarrowAdHeightForBreak=400,e.maxNarrowAdWidth=400,e}();t.Profiler=s},function(e,t,i){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),o=i(1),s=i(0),a=function(){function e(){this.commonFields=this.buildCommonFields(),this.eventServerUrl=r.Profiler.get().yieldData.eventServerUrl,this.logger=new o.Logger("Events"),this.profile=r.Profiler.get()}return e.get=function(){return e._instance||(this._instance=new e),e._instance},e.prototype.sendEngineLoadedEvent=function(){var e=r.Profiler.get(),t=this.getEngineLoadedEvent(e);this.send("supply",t.et,[t])},e.prototype.sendSpotFoundEvent=function(e){var t=this.getSpotFoundEvent(e);this.send("demand",t.et,[t])},e.prototype.sendPageviewEvent=function(e,t,i){var n=i&&i.length>0?{rsn:i.join(";")}:{},r=this.getPageviewEvent(e,t,n);this.send("supply",r.et,[r])},e.prototype.sendAdBlockerEvent=function(){var e=this.getAdBlockerEvent();this.send("supply",e.et,[e])},e.prototype.sendSpotEngineDoneEvent=function(){var e=r.Profiler.get(),t=this.getSpotEngineDoneEvent(e);this.send("supply",t.et,[t])},e.prototype.sendAdRequest=function(e,t){var i=this.getAdRequestEvent(e,t);this.send("demand",i.et,[i])},e.prototype.sendAdMatchedEvent=function(e,t,i,n,r,o,s){var a=this.getAdMatchedEvent(e,t,i,n,r,o,s);this.send("demand",a.et,[a])},e.prototype.sendAdImpression=function(e,t,i){var n=s.Utils.getSpotCoords(e),r=this.getAdImpressionEvent(n,e,t,i);this.send("demand",r.et,[r])},e.prototype.sendViewedImpression=function(e,t){var i=s.Utils.getSpotCoords(e),n=this.getViewedImpressionEvent(i,e,t);this.send("demand",n.et,[n])},e.prototype.sendViewedImpression100=function(e){var t=s.Utils.getSpotCoords(e),i=this.getViewedImpression100Event(t,e);this.send("demand",i.et,[i])},e.prototype.sendViewedPublisherAd=function(e,t){var i=this.getViewedPublisherAdEvent(e,t);this.send("demand",i.et,[i])},e.prototype.sendUserEngagementEvent=function(){var e=this.getUserEngagementEvent();this.send("supply",e.et,[e])},e.prototype.sendEngagementReportEvent=function(e){var t=this,i=e.map(function(e){return Object.assign({},t.commonFields,e)});this.send("engagement",i[0].et,i)},e.prototype.sendBidRequest=function(e,t){var i=this,n=s.Utils.getSpotCoords(t),r=e.map(function(e){return Object.assign({},i.getBidRequestEvent(n,t,e.bidderName,e.adUnit))});this.send("demand",r[0].et,r)},e.prototype.sendBidMatched=function(e,t,i){var n=this,r=e.map(function(e){return Object.assign({},n.getBidMatchedEvent(i,t,e))});this.send("demand",r[0].et,r)},e.prototype.sendAdBlockedEvent=function(e,t,i){e.adRequestBlockedSent=!0;var n=this.getAdBlockedEvent(e,t,i);this.send("demand",n.et,[n])},e.prototype.sendFocusChangedEvent=function(e){var t=this.getFocusChangedEvent(e);this.send("supply",t.et,[t])},e.prototype.sendPublisherAdFound=function(e){var t=this.getPublisherAdFoundEvent(e);this.send("demand",t.et,[t])},e.prototype.getEngineLoadedEvent=function(e){return Object.assign({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"engine_loaded",to:this.getTimeOffset(),res:e.deviceDetails.screenWidth+"x"+e.deviceDetails.screenHeight})},e.prototype.getSpotFoundEvent=function(e){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"spot_found",adix:e.adIndex,f:this.getFold(e),pt:e.positionTypes.join(","),ot:e.offsetTop,to:this.getTimeOffset(),dcs:!1,ill:e.isLazyLoading,pw:s.Utils.getPageWidth(),st:e.type})},e.prototype.getPageviewEvent=function(e,t,i){return n({},this.commonFields,i,{now:s.Utils.getCurrentTime(!0),et:"page_view",bpvid:this.profile.identity.bootstrapPageviewId,sf:e,fsf:t,dcs:!1,ie:e+t>0,tlls:-1,pl:s.Utils.getPageHeight(),pw:s.Utils.getPageWidth(),to:this.getTimeOffset(),res:this.profile.deviceDetails.screenWidth+"x"+this.profile.deviceDetails.screenHeight,scid:this.profile.identity.supplyConfigId,iru:this.profile.yieldData.isReturningUser,mcs:this.profile.domData?this.profile.domData.mainContent.start:-1,mcw:this.profile.domData?this.profile.domData.mainContent.width:-1,mch:s.Utils.getMainContentSize(this.profile.domData)})},e.getFiredEvents=function(){return e.firedEvents},e.prototype.getAdBlockerEvent=function(){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"ad_blocker",to:this.getTimeOffset(),ex:r.Profiler.adBlockerExists})},e.prototype.getUserEngagementEvent=function(){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"user_engaged",to:this.getTimeOffset()})},e.prototype.getSpotEngineDoneEvent=function(e){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"spot_engine_done",pl:s.Utils.getPageHeight(),to:this.getTimeOffset(),scid:e.identity.supplyConfigId,res:e.deviceDetails.screenWidth+"x"+e.deviceDetails.screenHeight})},e.prototype.getAdRequestEvent=function(e,t){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"ad_request",adf:"display",adix:e.adIndex,au:e.adUnit,saas:e.isSaas,atix:e.attemptIndex,pr:t,f:this.getFold(e),ot:s.Utils.getSpotCoords(e).top,ill:e.isLazyLoading,pw:s.Utils.getPageWidth(),rc:e.refresh.count,to:this.getTimeOffset(),ul:s.Utils.getScrollPosition().top,ev:e.expectedViewability,st:e.type,pt:e.positionTypes.join(",")})},e.prototype.getAdBlockedEvent=function(e,t,i){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"ad_request_blocked",adf:"display",adix:e.adIndex,au:e.adUnit,saas:e.isSaas,atix:e.attemptIndex,f:this.getFold(e),ot:s.Utils.getSpotCoords(e).top,ill:e.isLazyLoading,pw:s.Utils.getPageWidth(),rc:e.refresh.count,to:this.getTimeOffset(),rsn:t,msg:i,ul:s.Utils.getScrollPosition().top,st:e.type,pt:e.positionTypes.join(",")})},e.prototype.getPublisherAdFoundEvent=function(e){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"found_publisher_ad",adix:-1,au:e.adUnit,f:e.foldNum,ot:s.Utils.getElementCoordinates(e.element).top,ol:s.Utils.getElementCoordinates(e.element).left,ill:e.isLazyLoaded,pw:s.Utils.getPageWidth(),to:this.getTimeOffset(),pr:e.providerName,pt:e.positionType.join(","),h:e.height,w:e.width,plid:e.placementId,ul:s.Utils.getScrollPosition().top,rc:e.refreshCount})},e.prototype.getViewedPublisherAdEvent=function(e,t){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"viewed_publisher_ad",adix:-1,au:e.adUnit,f:e.foldNum,ot:s.Utils.getElementCoordinates(e.element).top,ol:s.Utils.getElementCoordinates(e.element).left,ill:e.isLazyLoaded,pw:s.Utils.getPageWidth(),to:this.getTimeOffset(),pr:e.providerName,pt:e.positionType.join(","),h:e.height,w:e.width,plid:e.placementId,ul:s.Utils.getScrollPosition().top,c:1,tiv:-1,piv:t,rc:e.refreshCount})},e.prototype.getAdMatchedEvent=function(e,t,i,r,o,a,d){return n({},this.commonFields,r?{hbw:r}:{},o?{rsn:o}:{},a?{br:a}:{},d?{brc:d}:{},{now:s.Utils.getCurrentTime(!0),et:"ad_matched",adf:"display",adix:e.adIndex,au:e.adUnit,im:i,saas:e.isSaas,atix:e.attemptIndex,w:e.selectedSize?e.selectedSize.w:-1,h:e.selectedSize?e.selectedSize.h:-1,pr:t,emt:e.selectedSize&&e.selectedSize.selectedEmbedding?e.selectedSize.selectedEmbedding:"NA",ft:-1,ot:s.Utils.getSpotCoords(e).top,f:this.getFold(e),ill:e.isLazyLoading,pw:s.Utils.getPageWidth(),rc:e.refresh.count,to:this.getTimeOffset(),ev:e.expectedViewability,st:e.type,pt:e.positionTypes.join(",")})},e.prototype.getAdImpressionEvent=function(e,t,i,r){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"ad_impression",adf:"display",au:t.adUnit,h:t.browsiAd.h,w:t.browsiAd.w,adix:t.adIndex,saas:t.isSaas,emt:r,atix:t.attemptIndex,ol:e.left,ot:e.top,pr:i,f:this.getFold(t),ft:-1,ill:t.isLazyLoading,dcs:!1,pw:s.Utils.getPageWidth(),rc:t.refresh.count,to:this.getTimeOffset(),ul:s.Utils.getScrollPosition().top,ev:t.expectedViewability,st:t.type,pt:t.positionTypes.join(",")})},e.prototype.getViewedImpressionEvent=function(e,t,i){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"viewed_impression",adf:"display",adix:t.adIndex,au:t.adUnit,saas:t.isSaas,h:t.browsiAd.h,w:t.browsiAd.w,emt:t.selectedSize&&t.selectedSize.selectedEmbedding?t.selectedSize.selectedEmbedding:"NA",ol:e.left,ot:e.top,atix:t.attemptIndex,c:1,pr:t.providerName,f:this.getFold(t),ft:-1,to:this.getTimeOffset(),pw:s.Utils.getPageWidth(),rc:t.refresh.count,tiv:-1,piv:i,dcs:!1,ill:t.isLazyLoading,st:t.type,pt:t.positionTypes.join(",")})},e.prototype.getViewedImpression100Event=function(e,t){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"v_100",adf:"display",adix:t.adIndex,au:t.adUnit,saas:t.isSaas,h:t.browsiAd.h,w:t.browsiAd.w,emt:t.selectedSize&&t.selectedSize.selectedEmbedding?t.selectedSize.selectedEmbedding:"NA",ol:e.left,ot:e.top,atix:t.attemptIndex,c:1,pr:t.providerName,f:this.getFold(t),ft:-1,to:this.getTimeOffset(),pw:s.Utils.getPageWidth(),rc:t.refresh.count,tiv:-1,dcs:!1,ill:t.isLazyLoading,st:t.type,pt:t.positionTypes.join(",")})},e.prototype.getBidRequestEvent=function(e,t,i,r){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"bid_request",bn:i,adf:"display",adix:t.adIndex,au:r,atix:t.attemptIndex,saas:t.isSaas,pr:t.providerName,f:this.getFold(t),ot:e.top,ol:e.left,ill:t.isLazyLoading,pw:s.Utils.getPageWidth(),rc:t.refresh.count,to:this.getTimeOffset(),st:t.type})},e.prototype.getBidMatchedEvent=function(e,t,i){return n({},this.commonFields,i.reason?{rsn:i.reason}:{},i.size,{now:s.Utils.getCurrentTime(!0),et:"bid_matched",bn:i.bidderName,br:i.bidRate,brc:i.currency,im:i.isMatched,adf:"display",adix:t.adIndex,au:i.adUnit,atix:t.attemptIndex,saas:t.isSaas,pr:t.providerName,f:this.getFold(t),ot:e.top,ol:e.left,ill:t.isLazyLoading,pw:s.Utils.getPageWidth(),rc:t.refresh.count,to:this.getTimeOffset(),st:t.type})},e.prototype.getFocusChangedEvent=function(e){return n({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:"focus_changed",if:e,to:this.getTimeOffset()})},e.prototype.send=function(t,i,n){var r=new XMLHttpRequest;r.open("POST",""+this.eventServerUrl+t+"?p="+this.commonFields.pvid,!0),r.send(JSON.stringify(n)),e.addToFiredEvents(t,i,n),this.logger.custom(t+"/"+i,"background: #AAFF7F; color: black; font-weight: bold; text-decoration:underline; font-size: 18px;",n)},e.addToFiredEvents=function(t,i,n){e.firedEvents.has(t)||e.firedEvents.set(t,new Map);var r=e.firedEvents.get(t);r&&!r.has(i)&&r.set(i,[]);var o=r&&r.get(i);o&&o.push.apply(o,n)},e.prototype.buildCommonFields=function(){var e=r.Profiler.get();return{sk:e.identity.siteKey,pk:e.identity.publisherKey,uid:e.identity.userId,sid:e.identity.sessionId,pvid:e.identity.pageviewId,geo:e.yieldData.countryCode,r:e.referrer,bpvid:e.identity.bootstrapPageviewId,url:e.identity.url,dos:e.deviceDetails.os,dosv:e.deviceDetails.osVersion,dv:e.deviceDetails.deviceVendor,dbt:e.deviceDetails.browserType,iru:e.yieldData.isReturningUser,ibpv:e.identity.isBenchmarkPageview,ts:e.yieldData.trafficSource,db:e.deviceDetails.browser,d:e.deviceDetails.device,dp:e.deviceDetails.deviceType,mv:e.yieldData.version,scid:e.identity.supplyConfigId,res:e.deviceDetails.screenWidth+"x"+e.deviceDetails.screenHeight,aid:e.identity.articleId}},e.prototype.getTimeOffset=function(){return s.Utils.getCurrentTime(!1)-this.profile.identity.timeOffset},e.prototype.getFold=function(e){return e.isImpression&&e.browsiAd.container?e.browsiAd.iframe?s.Utils.getElementFoldNumber(e.browsiAd.iframe):s.Utils.getElementFoldNumber(e.browsiAd.container):s.Utils.getElementFoldNumber(e.ref)},e.firedEvents=new Map,e}();t.EventsService=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(0),o=i(5),s=function(){function e(){var e=this;this.loaderParams=r.Utils.getLoaderParams(),this.logger=new n.Logger("SAService"),this.spots=[],this.errorCallback=function(t){return e.logger.error(t)},this.mainContentElements=r.Utils.querySelectorAll([this.loaderParams.e.mc.s],this.errorCallback),this.mainContentEndElement=this.loaderParams.e.mc.e?r.Utils.querySelector(this.loaderParams.e.mc.e,this.errorCallback):null,this.stayAwayConfigs=this.loaderParams.e.sa||[],this.maxSaDistance=this.stayAwayConfigs.reduce(function(e,t){return e.d<t.d?t:e},{e:"",d:0}).d,this.stayAwayElements=[],this.scanDomForSA()}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.setSpots=function(e){this.spots=e},e.prototype.getStayAwayElementsList=function(){return this.stayAwayElements.map(function(e){return{element:e.element,distance:e.stayAwayDistance,inMainContent:e.isInMainContent}})},e.prototype.scanDomForSA=function(){var e=this;this.stayAwayConfigs.forEach(function(t){r.Utils.querySelectorAll([t.e],e.errorCallback).map(function(e){return{sa:{element:e,distance:t.d},config:t}}).forEach(function(t){e.upsertStayAwayElement(t.sa.element,t,!1)})})},e.prototype.scanDomForLazySA=function(e,t){var i=this;this.logger.info("re-scanning dom for SA");var n=r.Utils.getPositionFallback(e);this.stayAwayConfigs.forEach(function(e){r.Utils.querySelectorAll([e.e],i.errorCallback).filter(function(e){return i.shouldStayAwayFrom(e,n,t)}).map(function(t){return{sa:{element:t,distance:e.d},config:e}}).forEach(function(e){i.upsertStayAwayElement(e.sa.element,e,!0)})})},e.prototype.shouldStayAwayFrom=function(e,t,i){return Math.abs(r.Utils.getPositionFallback(e)-t)<=this.maxSaDistance&&(!i||r.Utils.isDescendantElement(this.mainContentElements,e))},e.prototype.upsertStayAwayElement=function(e,t,i){var n=this.stayAwayElements.find(function(t){return t.element===e});if(n)return this.updateSaElement(e,n),null;var r=this.insertSaElement(e,t.sa,i);return void 0!==t.config.e?this.logger.debug(i?"Lazy ":"","Added",r,"By Config: ",t):this.logger.debug(i?"Lazy ":"","Added",r),r},e.prototype.updateSaElement=function(e,t){var i=Object.assign({},t);!t.isValid&&this.isSaValid(e)&&(t.isLazy=!0),t.top=this.getPositionFromTop(e),t.height=e.getBoundingClientRect().height,t.isValid=this.isSaValid(e),t.isInMainContent=r.Utils.isDescendantElement(this.mainContentElements,e),i.top===t.top&&i.height===t.height&&e.style.display===t.element.style.display||this.logger.debug("Updated: ",i," TO: ",t)},e.prototype.insertSaElement=function(e,t,i){var n=e.getBoundingClientRect(),o={element:e,top:this.getPositionFromTop(e),height:n.height,stayAwayDistance:t.distance,isLazy:i,isInMainContent:r.Utils.isDescendantElement(this.mainContentElements,e),isValid:this.isSaValid(e)};return this.stayAwayElements.push(o),o},e.prototype.getPositionFromTop=function(e){return this.shouldUseNewCalculations()?r.Utils.getPositionFallback(e):r.Utils.getElementPosition(e).y},e.prototype.isSaValid=function(e){return r.Utils.isVisible(e)&&!r.Utils.isPositionFixed(e)},e.prototype.shouldUseNewCalculations=function(){return!!this.loaderParams.e.sapc},e.prototype.validateSa=function(e){return!this.shouldUseNewCalculations()||e.isValid},e.prototype.isElementContainedInSa=function(e,t){return this.shouldUseNewCalculations()&&r.Utils.isPositionContained(e,t)},e.prototype.isStayAwayViolated=function(e){return this.shouldUseNewCalculations()&&this.scanDomForLazySA(e.ref,e.type===o.SpotType.DYNAMIC),this.isStayAwayForAllEmbedTypes(e.ref,e.compatibleSizes,e.type===o.SpotType.DYNAMIC)},e.prototype.isStayAwayForAllEmbedTypes=function(e,t,i){var n=r.Utils.getEmbedTypesFromSizes(t),o=n.includes("break"),s=n.includes("wrapped");if(o){var a=this.isStayAwayElementForBreak(e,i);if("invalid"===a.status)return a;if(s)for(var d=t.length,l=void 0;d--;)if("invalid"===(l=this.removeViolatingWrappedEmbeddings(e,t[d],i)).status&&t.splice(d,1),0===t.length)return l}else if(s)for(d=t.length,l=void 0;d--;)if("invalid"===(l=this.removeViolatingWrappedEmbeddings(e,t[d],i)).status&&t.splice(d,1),0===t.length)return l;return{status:"valid"}},e.prototype.removeViolatingWrappedEmbeddings=function(e,t,i){var n=t.optionalEmbeddings.indexOf("wrapped");if(n>-1){var r=this.isStayAwayElementForWrap(e,t,i);if("invalid"===r.status)return t.optionalEmbeddings.splice(n,1),t.optionalEmbeddings.length>0?{status:"valid"}:r}return{status:"valid"}},e.prototype.isStayAwayElementForWrap=function(e,t,i){var n=this;if(this.stayAwayElements.length>0){var o=this.stayAwayElements.find(function(o){if(i&&!o.isInMainContent)return!1;if(n.isElementContainedInSa(o.element,e))return!0;var s=r.Utils.calculateDistanceBetween(e,o.element);if(r.Utils.isPositionedAfter(o.element,e)){var a=r.Utils.isContainedElement(e,o.element)?0:r.Utils.getMaxWrappingOffsetDistance(e,t);s+=e.getBoundingClientRect().height+a}var d=s<=o.stayAwayDistance;return n.validateSa(o)&&r.Utils.isElement(o.element)&&d});return o&&o.element?{status:"invalid",message:"stay away violation",element:o.element}:{status:"valid"}}return{status:"valid"}},e.prototype.isStayAwayElementForBreak=function(e,t){var i=this;if(this.stayAwayElements.length>0){var n=this.stayAwayElements.find(function(n){if(t&&!n.isInMainContent)return!1;if(i.isElementContainedInSa(n.element,e))return!0;var o=r.Utils.calculateDistanceBetween(e,n.element)+(r.Utils.isPositionedAfter(n.element,e)&&!r.Utils.isContainedElement(e,n.element)?e.getBoundingClientRect().height:0)<=n.stayAwayDistance;return i.validateSa(n)&&r.Utils.isElement(n.element)&&o});return n&&n.element?{status:"invalid",message:"stay away violation",element:n.element}:{status:"valid"}}return{status:"valid"}},e.prototype.isStayAwayElement=function(e){var t=this;if(this.stayAwayElements.length>0){var i=this.stayAwayElements.find(function(i){if(!i.isInMainContent)return!1;if(t.isElementContainedInSa(i.element,e))return!0;var n=r.Utils.calculateDistanceBetween(e,i.element)<=i.stayAwayDistance;return t.validateSa(i)&&r.Utils.isElement(i.element)&&n});return i&&i.element?{status:"invalid",message:"stay away violation",element:i.element}:{status:"valid"}}return{status:"valid"}},e}();t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FIXED="fixed",e.DYNAMIC="dynamic"}(t.SpotType||(t.SpotType={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(3),o=i(2),s=function(){function e(){var e=this;this.logger=new n.Logger("Focus"),this.profile=o.Profiler.get(),this.isSubscribed=!0,this.isHidden="hidden"===document.visibilityState,this.isHidden&&r.EventsService.get().sendFocusChangedEvent(!1),this.subscribe(function(t){e.onFocusChanged(t)})}return e.prototype.subscribe=function(e){var t=this;this.profile.debugMode&&this.listenToDemoVisibilityChange(e),document.addEventListener("visibilitychange",function(){t.isHidden="hidden"===document.visibilityState,e(t.isHidden)})},e.prototype.unsubscribe=function(){return this.isSubscribed=!1,!0},e.prototype.waitForUserFocusWithAdBlock=function(e){return this.profile.blockAdRequestOnOOF?(this.isHidden&&!e.adRequestBlockedSent&&r.EventsService.get().sendAdBlockedEvent(e,"out_of_focus",""),this.waitForUserFocus()):Promise.resolve()},e.prototype.waitForUserFocus=function(){var e=this;return new Promise(function(t){if(e.subscribe(function(e){e||t()}),!e.isHidden)return t()})},e.prototype.onFocusChanged=function(e){this.isHidden=e,this.logger.info("focus changed. in focus: "+!this.isHidden),r.EventsService.get().sendFocusChangedEvent(!e)},e.prototype.listenToDemoVisibilityChange=function(e){var t=this;document.addEventListener("demoVisibilityChange",function(){t.isHidden=!!window._isHidden,e(t.isHidden)})},e.instance=new e,e}();t.Focus=s},function(e,t,i){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),i={},n=0;n<t.length;n++)i[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return i},r=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(a(arguments[i]));return t.join(" ")}i=1;for(var n=arguments,o=n.length,s=String(e).replace(r,function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}}),d=n[i];i<o;d=n[++i])g(d)||!w(d)?s+=" "+d:s+=" "+a(d);return s},t.deprecate=function(i,n){if(void 0!==e&&!0===e.noDeprecation)return i;if(void 0===e)return function(){return t.deprecate(i,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),r=!0}return i.apply(this,arguments)}};var o,s={};function a(e,i){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(i)?n.showHidden=i:i&&t._extend(n,i),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=d),c(n,e,n.depth)}function d(e,t){var i=a.styles[t];return i?"["+a.colors[i][0]+"m"+e+"["+a.colors[i][1]+"m":e}function l(e,t){return e}function c(e,i,n){if(e.customInspect&&i&&A(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,e);return y(r)||(r=c(e,r,n)),r}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(m(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,i);if(o)return o;var s=Object.keys(i),a=function(e){var t={};return e.forEach(function(e,i){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(i)),E(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(i);if(0===s.length){if(A(i)){var d=i.name?": "+i.name:"";return e.stylize("[Function"+d+"]","special")}if(b(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(S(i))return e.stylize(Date.prototype.toString.call(i),"date");if(E(i))return u(i)}var l,w="",C=!1,I=["{","}"];(f(i)&&(C=!0,I=["[","]"]),A(i))&&(w=" [Function"+(i.name?": "+i.name:"")+"]");return b(i)&&(w=" "+RegExp.prototype.toString.call(i)),S(i)&&(w=" "+Date.prototype.toUTCString.call(i)),E(i)&&(w=" "+u(i)),0!==s.length||C&&0!=i.length?n<0?b(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),l=C?function(e,t,i,n,r){for(var o=[],s=0,a=t.length;s<a;++s)U(t,String(s))?o.push(p(e,t,i,n,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(p(e,t,i,n,r,!0))}),o}(e,i,n,a,s):s.map(function(t){return p(e,i,n,a,t,C)}),e.seen.pop(),function(e,t,i){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1];return i[0]+t+" "+e.join(", ")+" "+i[1]}(l,w,I)):I[0]+w+I[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,i,n,r,o){var s,a,d;if((d=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=d.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):d.set&&(a=e.stylize("[Setter]","special")),U(n,r)||(s="["+r+"]"),a||(e.seen.indexOf(d.value)<0?(a=g(i)?c(e,d.value,null):c(e,d.value,i-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===C(e)}function w(e){return"object"==typeof e&&null!==e}function S(e){return w(e)&&"[object Date]"===C(e)}function E(e){return w(e)&&("[object Error]"===C(e)||e instanceof Error)}function A(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(i){if(v(o)&&(o=e.env.NODE_DEBUG||""),i=i.toUpperCase(),!s[i])if(new RegExp("\\b"+i+"\\b","i").test(o)){var n=e.pid;s[i]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",i,n,e)}}else s[i]=function(){};return s[i]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=h,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=w,t.isDate=S,t.isError=E,t.isFunction=A,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=i(17);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function U(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,i;console.log("%s - %s",(e=new Date,i=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":"),[e.getDate(),P[e.getMonth()],i].join(" ")),t.format.apply(t,arguments))},t.inherits=i(18),t._extend=function(e,t){if(!t||!w(t))return e;for(var i=Object.keys(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e};var x="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function _(e,t){if(!e){var i=new Error("Promise was rejected with a falsy value");i.reason=e,e=i}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(x&&e[x]){var t;if("function"!=typeof(t=e[x]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,x,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,i,n=new Promise(function(e,n){t=e,i=n}),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push(function(e,n){e?i(e):t(n)});try{e.apply(this,r)}catch(e){i(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),x&&Object.defineProperty(t,x,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=x,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function i(){for(var i=[],n=0;n<arguments.length;n++)i.push(arguments[n]);var r=i.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return r.apply(o,arguments)};t.apply(this,i).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(_,t,s)})}return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),Object.defineProperties(i,n(t)),i}}).call(t,i(16))},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__assign||Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),a=i(10),d=i(2),l=i(0),c=i(3),u=i(6),p=function(e){function t(t,i,n,r){var o=e.call(this,t,i)||this;return o.bidConfigs=o.getBidConfig(n,r,t),o.iframeDoc=null,o.logger=new s.Logger("PrebidJs"),o.profile=d.Profiler.get(),o}return r(t,e),t.prototype.fetch=function(e,t){var i=this;return new Promise(function(n){i.logger.info("fetching spot "+i.spot.adIndex,i.spot),t.appendAndGetWrapper(i.spot).then(function(e){return i.addPrebidScriptTag(e)}).then(function(t){return i.runPbjsCommands(e,t)}).then(function(e){return n(e)}).catch(function(e){"not_supported"===e?(i.logger.error("fetching failed: Prebid version "+(i.pbjsInstance?i.pbjsInstance.version:"")+" is not supported",i.pbjsInstance),c.EventsService.get().sendAdBlockedEvent(i.spot,"prebid_version_unsupported","Prebid version "+(i.pbjsInstance?i.pbjsInstance.version:"")),n({status:"not_supported"})):(i.logger.error("fetching failed: ",e),n("error"))})})},t.prototype.runPbjsCommands=function(e,t){var i=this;return new Promise(function(n,r){u.Focus.instance.waitForUserFocusWithAdBlock(i.spot).then(function(){i.handlePbjsCommands(e,t,n,r)})})},t.prototype.buildIframe=function(e,t){var i=document.createElement("iframe");return i.id=e,i.width=""+t.width,i.height=""+t.height,i.scrolling="no",i.frameBorder="0",i},t.prototype.getHighestBidById=function(e,t){var i=e[t]&&e[t].bids;return i?i.reduce(function(e,t){return e.cpm>t.cpm?e:t}):null},t.prototype.addPrebidScriptTag=function(e){var t=this;return e.win?this.profile.prebidPath?(this.pbjsInstance=e.win.pbjs,this.pbjsInstance&&this.pbjsInstance.version?0===this.pbjsInstance.version.indexOf("v0")?Promise.reject("not_supported"):(this.logger.info("using existing pbjs"),Promise.resolve(e)):new Promise(function(i,n){if(!e.win)return n(e);var r=e.win.document.createElement("script");r.async=!0,r.setAttribute("src",t.profile.prebidPath),r.addEventListener("load",function(){e.win&&(t.pbjsInstance=e.win.pbjs,i(e))}),r.addEventListener("error",function(){n(e)}),e.win.document.head.appendChild(r)})):Promise.reject("no_url"):Promise.reject(e)},t.prototype.buildAdUnit=function(e,t){var i=this;return t&&t.e&&this.bidConfigs.forEach(function(e){e.params[i.browsiViewability50Key]=t.e}),{code:e,mediaTypes:{banner:{sizes:this.buildSizesArray()}},bids:this.bidConfigs}},t.prototype.getBidConfig=function(e,t,i){var n=this;return e.reduce(function(e,r){switch(r.p){case"appnexus":return e.concat(n.buildAppnexusBids(r));case"appnexus_inv_code":return r.p="appnexus",e.concat(n.buildAppnexusInvBids(r));case"adform":return e.concat(n.buildAdformBids(r));case"sovrn":return e.concat(n.buildSovrnBids(r));case"districtmdmx":return e.concat(n.buildDistrictBids(r));case"pulsepoint":return e.concat(n.buildPulsepointBids(r,i));case"aol":return e.concat(n.buildAolBids(r));case"openx":return e.concat(n.buildOpenxBids(r));case"rubicon":return e.concat(n.buildRubiconBids(r));case"smart_ad_server":return e.concat(n.buildSmartAdBids(r));case"ad_you_like":return e.concat(n.buildAdULikeBids(r));case"audiencenetwork":return e.concat(n.buildAudienceNetworkBids(r));case"criteo":return e.concat(n.buildCriteoBids(r));case"index_exchange":return e.concat(n.buildIndexExchangeBids(r,i));case"lockerdome":return e.concat(n.buildLockerdomeBids(r));case"pubmatic":return e.concat(n.buildPubmaticBids(r,i));case"brealtime":return e.concat(n.buildBrealTimeBids(r));case"sharethrough":return e.concat(n.buildSharethroughBids(r));case"sonobi":return e.concat(n.buildSonobiBids(r));case"gum_gum":return e.concat(n.buildGumGumBids(r));case"triple_lift":return e.concat(n.buildTripleliftBids(r));case"across":return e.concat(n.buildAcrossBids(r));case"conversant":return e.concat(n.buildConversantBids(r));case"ias":return e.concat(n.buildIASBids(r,t));case"adkernel":return e.concat(n.buildAdKernelBids(r));case"aja":return e.concat(n.buildAjaBids(r));case"yjax":return e.concat(n.buildYjaxBids(r));case"rdn":return e.concat(n.buildRdnBids(r));case"dgads":return e.concat(n.buildDgadsBids(r));case"kargo":case"medianet":case"yieldmo":case"onemobile":case"districtm":return e.concat([{bidder:r.p,params:r.a}])}return e.concat([])},[])||[]},t.prototype.buildAppnexusBids=function(e){return[{bidder:"appnexus",params:{placementId:e.au}}]},t.prototype.buildAppnexusInvBids=function(e){return[{bidder:"appnexus",params:{member:e.a.memberId,invCode:e.au}}]},t.prototype.buildAdformBids=function(e){return[{bidder:"adform",params:{mid:e.au}}]},t.prototype.buildSovrnBids=function(e){return[{bidder:"sovrn",params:{tagid:e.au}}]},t.prototype.buildDistrictBids=function(e){return[{bidder:"districtmDMX",params:{id:e.au}}]},t.prototype.buildPulsepointBids=function(e,t){return t.compatibleSizes.map(function(t){return{bidder:"pulsepoint",params:{cf:l.Utils.sizeToString(t),cp:e.a.publisherId,ct:e.au}}})},t.prototype.buildAolBids=function(e){return[{bidder:"aol",params:{placement:e.au,network:e.a.networkId}}]},t.prototype.buildOpenxBids=function(e){return[{bidder:"openx",params:{unit:e.au,delDomain:e.a.delDomain}}]},t.prototype.buildRubiconBids=function(e){var t=e.a;return t.zoneId=e.au,t.sizes=void 0,[{bidder:"rubicon",params:t}]},t.prototype.buildSmartAdBids=function(e){var t=e.a;return t.pageId=e.au,t.domain="https://prg.smartadserver.com",[{bidder:"smartadserver",params:t}]},t.prototype.buildAdULikeBids=function(e){return[{bidder:"adyoulike",params:{placement:e.au}}]},t.prototype.buildAudienceNetworkBids=function(e){return[{bidder:"audienceNetwork",params:{placementId:e.au}}]},t.prototype.buildCriteoBids=function(e){return[{bidder:"criteo",params:{zoneId:e.au}}]},t.prototype.buildIndexExchangeBids=function(e,t){return t.compatibleSizes.map(function(t){return{bidder:"ix",params:{siteId:e.au,size:[t.w,t.h]}}})},t.prototype.buildLockerdomeBids=function(e){return[{bidder:"lockerdome",params:{adUnitId:e.au}}]},t.prototype.buildPubmaticBids=function(e,t){return t.compatibleSizes.map(function(t){return{bidder:"pubmatic",params:{publisherId:e.a.adSlot||e.a.publisherId,adSlot:e.au+"@"+l.Utils.sizeToString(t)}}})},t.prototype.buildBrealTimeBids=function(e){return[{bidder:"emx_digital",params:{tagid:e.au}}]},t.prototype.buildSharethroughBids=function(e){return[{bidder:"sharethrough",params:{pkey:e.au}}]},t.prototype.buildSonobiBids=function(e){return[{bidder:"sonobi",params:{ad_unit:e.au}}]},t.prototype.buildGumGumBids=function(e){return[{bidder:"gumgum",params:{inScreen:e.au}}]},t.prototype.buildTripleliftBids=function(e){return[{bidder:"triplelift",params:{inventoryCode:e.au}}]},t.prototype.buildAcrossBids=function(e){return[{bidder:"33across",params:{siteId:e.a.siteID,productId:e.a.productID}}]},t.prototype.buildConversantBids=function(e){return[{bidder:"conversant",params:{site_id:e.a.siteID,secure:Number(e.a.secure)}}]},t.prototype.buildIASBids=function(e,t){return[{bidder:"ias",params:{pubId:e.a.pubId,adUnitPath:this.getAdUnitPath(t)}}]},t.prototype.buildAdKernelBids=function(e){return[{bidder:"adkernel",params:{host:e.a.host,zoneId:e.a.zoneId}}]},t.prototype.buildAjaBids=function(e){return[{bidder:"aja",params:{asi:e.a.asi}}]},t.prototype.buildYjaxBids=function(e){return[{bidder:"appnexus",params:{placementId:e.a.placementId,usePaymentRule:e.a.usePaymentRule}}]},t.prototype.buildRdnBids=function(e){return[{bidder:"rdn",params:{adSpotId:e.a.adSpotId}}]},t.prototype.buildDgadsBids=function(e){return[{bidder:"dgads",params:{location_id:e.a.location_id,site_id:e.a.site_id}}]},t.prototype.getBidResponses=function(e){var t=this.pbjsInstance&&this.pbjsInstance.getBidResponses()[e];return t?t.bids:[]},t.prototype.sendBidRequests=function(e){var t=this,i=[];e.bids.forEach(function(e){var n={adUnit:t.getAdUnitForBidRequest(e),bidderName:e.bidder};i.push(n)}),i.length&&c.EventsService.get().sendBidRequest(i,this.spot)},t.prototype.sendBidMatchedEvents=function(e){var t=this,i=this.getBidResponses(e),n=this.getCurrentAuctionDefinition(e),r=l.Utils.getSpotCoords(this.spot),o=[];i.forEach(function(e){var i=Number(e.cpm),r=e.currency||"NA",s={w:e.width,h:e.height},a={bidderName:e.bidder,adUnit:t.getAdUnitForBidMatched(e,n),bidRate:i,currency:r,isMatched:i>0,size:s};o.push(a)}),this.getNoBids(e).forEach(function(e){var i={bidderName:e.bidder,adUnit:t.getAdUnitForBidRequest(e),bidRate:-1,currency:"NA",isMatched:!1,size:{w:-1,h:-1},reason:"no_bid"};o.push(i)}),o.length&&c.EventsService.get().sendBidMatched(o,this.spot,r)},t.prototype.getNoBids=function(e){if(this.pbjsInstance&&this.pbjsInstance.getNoBids&&"function"==typeof this.pbjsInstance.getNoBids){var t=this.pbjsInstance.getNoBids()[e];return t?t.bids:[]}return[]},t.prototype.getCurrentAuctionDefinition=function(e){return this.pbjsInstance&&this.pbjsInstance.adUnits.find(function(t){return t.code===e})||null},t.prototype.getAdUnitForBidMatched=function(e,t){if(t){var i=t.bids.find(function(t){return t.bidder===e.bidder});return i?this.getAdUnitForBidRequest(i):"NA"}return"NA"},t.prototype.getAdUnitForBidRequest=function(e){var t=null;switch(e.bidder){case"audienceNetwork":t=e.params.placementId;break;case"openx":t=e.params.unit;break;case"rubicon":t=e.params.zoneId;break;case"smart_ad_server":t=e.params.pageId;break;case"emx_digital":t=e.params.tagid;break;case"ad_you_like":t=e.params.placement;break;case"appnexus":t=e.params.placementId;break;case"pulsepoint":t=e.params.ct;break;case"adform":t=e.params.mid;break;case"aol":t=e.params.placement;break;case"sovrn":t=e.params.tagid;break;case"districtmDMX":t=e.params.dmxid;break;case"appnexus_inv_code":t=e.params.invCode;break;case"criteo":t=e.params.zoneId;break;case"ix":t=e.params.siteId;break;case"lockerdome":t=e.params.adUnitId;break;case"pubmatic":t=e.params.adSlot;break;case"sharethrough":t=e.params.pkey;break;case"sonobi":t=e.params.ad_unit;break;case"gumgum":t=e.params.inScreen;break;case"triplelift":t=e.params.inventoryCode;break;case"improvedigital":t=e.params.placementId;break;case"33across":t=e.params.siteId;break;case"conversant":t=e.params.site_id;break;case"ias":t=e.params.adUnitPath;break;case"kargo":t=e.params.placementId;break;case"medianet":t=e.params.cid;break;case"yieldmo":t=e.params.placementId;break;case"onemobile":t=e.params.dcn;break;case"districtm":t=e.params.placementId;break;case"adkernel":t=e.params.zoneId;break;case"aja":t=e.params.asi;break;case"yjax":t=e.params.placementId;break;case"rdn":t=e.params.adSpotId;break;case"dgads":t=e.params.location_id;break;case"beyondx":t=e.params.dfpaduid}return t.toString()||""},t.prototype.getConfig=function(e,t){return o({enableSendAllBids:!0,debug:l.Utils.getLoaderParams().debug},this.getUserIdConfig(),this.getConsentManagementConfig(),t?{priceGranularity:e&&e.c.pg||"auto"}:{})},t.prototype.getUserIdConfig=function(){return this.profile.prebidData&&this.profile.prebidData.u?{userSync:JSON.parse(this.profile.prebidData.u.pj)}:{}},t.prototype.getConsentManagementConfig=function(){return this.profile.prebidData&&this.profile.prebidData.c?{consentManagement:{cmpApi:this.profile.prebidData.c.c.toLowerCase(),timeout:1e4,allowAuctionWithoutConsent:!0}}:{}},t.prototype.addCustomConfigByProvider=function(e){var t=this;e.forEach(function(e){if(t.pbjsInstance)switch(e.p){case"pubmatic":t.pbjsInstance.setConfig({userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}}}});break;case"ias":t.pbjsInstance.bidderSettings.ias={alwaysUseBid:!0,sendStandardTargeting:!1,suppressEmptyKeys:!0,adserverTargeting:[{key:"adt",val:function(e){return e.adt}},{key:"alc",val:function(e){return e.alc}},{key:"dlm",val:function(e){return e.dlm}},{key:"drg",val:function(e){return e.drg}},{key:"hat",val:function(e){return e.hat}},{key:"off",val:function(e){return e.off}},{key:"vio",val:function(e){return e.vio}},{key:"fr",val:function(e){return e.fr}},{key:"id",val:function(e){return e.slots[e.adUnitCode].id}},{key:"vw",val:function(e){return e.slots[e.adUnitCode].vw}},{key:"grm",val:function(e){return e.slots[e.adUnitCode].grm}},{key:"pub",val:function(e){return e.slots[e.adUnitCode].pub}}]}}})},t.prototype.handleBidSuccess=function(e,t,i,n,r,o){if(t.width&&t.height&&t.adUnitCode&&i.container){var s={w:t.width,h:t.height};this.spot.selectedSize=l.Utils.findSizeInSpot(this.spot,s),this.spot.providerName=this.providerName,this.spot.browsiAd=Object.assign({},this.spot.browsiAd,s),this.sendBidMatchedEvents(t.adUnitCode),c.EventsService.get().sendAdMatchedEvent(this.spot,"header_bidding",!0,t.bidder,o);var a=this.buildIframe(i.container.id,t);i.iframe?i.iframe.contentDocument.body.appendChild(a):i.container.appendChild(a),this.spot.selectedSize&&this.pbjsInstance&&t.adId?(this.pbjsInstance.renderAd(a.contentWindow.document,t.adId),this.expendAd(this.spot.selectedSize,r)):r({status:"failure"}),this.logger.hbLog(e,i.container.id,this.getNoBids(i.container.id),t.bidder)}},t}(a.Provider);t.PrebidJs=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(2),o=i(0),s=i(22),a=i(27),d=i(30),l=i(12),c=i(4),u=i(3),p=i(5),f=function(){function e(){this.logger=new n.Logger("YieldClient"),this.profile=r.Profiler.get()}return e.get=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.processSpots=function(e){var t=this;e.forEach(function(e){var i=t.createGetDemandScriptTag(e,t.getDemandCallback.bind(t));window.top.document.body.appendChild(i)})},e.prototype.processSingleSpot=function(e){this.logger.info("attemptIndex",e.attemptIndex);var t=this.createGetDemandScriptTag(e,this.getDemandCallback.bind(this));window.top.document.body.appendChild(t)},e.prototype.createGetDemandScriptTag=function(e,t){var i="__b_gdc_ad_"+e.adIndex;window.top[i]=function(i){return t(i,e)};var n=document.createElement("script");return n.setAttribute("crossorigin","anonymous"),n.async=!0,n.src=this.buildGetDemandUrl(e,i),n},e.prototype.buildGetDemandUrl=function(e,t){var i=r.Profiler.get();this.logger.info("AttemptIndex: ",e.attemptIndex);var n={sk:i.identity.siteKey,pvId:i.identity.pageviewId,atI:e.attemptIndex,sId:i.identity.sessionId,uId:i.identity.userId,u:document.location.href,f:o.Utils.getElementFoldNumber(e.ref),ai:e.adIndex,c:t,rc:e.refresh.count,eul:l.default.get().getThresholdMidPoint(e),aId:i.identity.articleId,et:e.getExpectedEmbedding(),ll:e.isLazyLoading,mch:o.Utils.getMainContentSize(i.domData),ot:o.Utils.getElementPosition(e.ref).y,pl:o.Utils.getPageHeight(),sh:i.deviceDetails.screenHeight,dp:e.type===p.SpotType.DYNAMIC};return"//"+i.yieldData.host+"/v2/demand/desktop?"+o.Utils.toUrlParams(n)},e.prototype.getDemandCallback=function(e,t){var i=this;if(o.Utils.getElementFoldNumber(t.ref)>=2&&!o.Utils.isEngagedUser())this.waitForUserEngagement().then(function(){return i.getDemandCallback(e,t)});else if("empty"===e.rt)this.logger.info("getDemand returned empty, waterfall ended for spot "+t.adIndex);else if("provider"===e.rt){var n=e;this.logger.info("getDemand returned ["+n.c.p+"] for spot "+t.adIndex+", attempt "+t.attemptIndex,e),t.adUnit=n.c.au,this.handleDemand(e,t)}else"header_bidding"===e.rt&&(this.logger.info("getDemand returned ["+e.c.c+"] for spot "+t.adIndex+", attempt "+t.attemptIndex,e),t.adUnit="NA",this.handleDemand(e,t))},e.prototype.handleDemand=function(e,t){var i=this;t.isSaas=e.s;var n=a.EmbeddingFactory.getEmbedder(e,t),r=s.ProviderFactory.getProvider(e,t);r&&n?(this.runPreFetch(t,e,r),t.updateRefreshDetails(e),this.isLazySpot(t)&&!t.isRefreshing()?l.default.get().subscribe(t,function(){return i.matchAndFetch(e,n,r,t)}):this.matchAndFetch(e,n,r,t)):this.nextWaterfallStep(t)},e.prototype.isLazySpot=function(e){return l.default.isLazyConfiguredForSpotType(e.type,this.profile)&&e.isLazyLoading},e.prototype.handleAdRequestBlockStayAway=function(e,t){e.adRequestBlockedSent||(this.logger.debug("spot "+e.adIndex+" blocked because of stayAway from "+t.element),u.EventsService.get().sendAdBlockedEvent(e,"stay_away",t.message?t.message:""))},e.prototype.checkSpotViolations=function(e){return e.isRefreshing()||e.type===p.SpotType.FIXED?{status:"valid"}:c.default.instance.isStayAwayViolated(e)},e.prototype.matchAndFetch=function(e,t,i,n){var r=this.checkSpotViolations(n);"invalid"===r.status?this.handleAdRequestBlockStayAway(n,r):this.fetch(e,t,i,n)},e.prototype.fetch=function(e,t,i,n){var o=this;n.setExpectedViewability(e),i.fetch(e,t).then(function(t){switch(o.logger.logWaterfallDetails(n,e,t.status),t.status){case"failure":case"timeout":case"not_supported":n.removeAdFromDom(),n.updateBrowsiAdWrapper(),o.nextWaterfallStep(n);break;case"success":o.logger.info("SUCCESS"),r.Profiler.get().enableMoat&&d.MoatService.get().injectMoat(n),o.runPostFetch(n,e)}})},e.prototype.nextWaterfallStep=function(e){e.isRefreshing()?e.endRefreshProcess():(e.attemptIndex++,this.processSingleSpot(e))},e.prototype.runPreFetch=function(e,t,i){var n=o.Utils.getExternalFlowHandler("preFetch");if(n)try{t.kv=t.kv||[],this.logger.info("executing preFetch"),n(e,i,t)}catch(e){this.logger.error("failed to execute preFetch",e)}},e.prototype.runPostFetch=function(e,t){var i=o.Utils.getExternalFlowHandler("postFetch");if(i)try{this.logger.info("executing postFetch"),i(e,t)}catch(e){this.logger.error("failed to execute postFetch",e)}},e.prototype.waitForUserEngagement=function(){var e=this;return new Promise(function(t){var i=function(){e.logger.info("detected scroll, fetching"),window.top.removeEventListener("scroll",i),e.profile.engagedUsers.engaged=!0,t()};window.top.addEventListener("scroll",i)})},e}();t.YieldClient=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(2),s=function(){function e(e,t){this.spot=e,this.providerName=t,this.hasFluidSizeSupport=!1;var i=n.Utils.getLoaderParams().e.pkv;this.browsiViewability50Key=i.v50}return e.prototype.getAdUnitPath=function(e){return"/"+e.a.pubID+"/"+e.au},e.prototype.addGPTScriptTag=function(e){var t=this;return new Promise(function(i,n){if(e&&e.win){var r=e.win.document.createElement("script");r.async=!0,r.setAttribute("src","https://securepubads.g.doubleclick.net/tag/js/gpt.js"),r.addEventListener("load",function(){i(e)}),e.win.document.head.appendChild(r)}else t.logger.error("failed to append gpt script tag"),n(e)})},e.prototype.expendAd=function(e,t){var i=this;this.spot.handleRefreshedDone(),this.spot.expend(e).then(function(s){i.spot.isImpression=!0;var a=o.Profiler.get().adMarking;if(a&&i.spot.browsiAd.wrapper&&i.spot.selectedSize&&"break"===i.spot.selectedSize.selectedEmbedding&&!i.spot.browsiAd.admarking){var d=n.Utils.buildAdMarking(i.spot,a);i.spot.browsiAd.wrapper.insertBefore(d,i.spot.browsiAd.wrapper.firstChild),i.spot.browsiAd.admarking=d}r.EventsService.get().sendAdImpression(i.spot,i.providerName,e.selectedEmbedding),i.logger.info("["+s.w+"X"+s.h+"] "+i.providerName+" ad created: ",i.spot.browsiAd.wrapper),i.spot.subscribeToViewabilityService(),t({status:"success"})})},e.prototype.buildSizesArray=function(){var e=this;return this.spot.isRefreshing()&&this.spot.selectedSize?this.hasFluidSizeSupport&&n.Utils.isFluidSize(this.spot.selectedSize)?["fluid"]:[this.spot.selectedSize.w,this.spot.selectedSize.h]:this.spot.compatibleSizes.filter(function(t){return e.hasFluidSizeSupport||!e.hasFluidSizeSupport&&!n.Utils.isFluidSize(t)}).map(function(t){return e.hasFluidSizeSupport&&n.Utils.isFluidSize(t)?["fluid"]:[t.w,t.h]})},e.prototype.isBrowsiSlot=function(e,t){return e.slot&&e.slot.getSlotElementId()===t},e.prototype.addKeyValues=function(e,t){e.od&&e.od.e&&t.setTargeting(this.browsiViewability50Key,String(e.od.e)),this.spot.refresh.requested&&e.ri.kv&&t.setTargeting("browsiRefresh","true"),e.kv&&e.kv.forEach(function(e){t.setTargeting(e.k,e.v)})},e.prototype.getDfpEventSize=function(e){return e&&Array.isArray(e.size)?{w:e.size[0],h:e.size[1]}:{w:-1,h:-1}},e.prototype.runPreAuction=function(e,t){var i=n.Utils.getExternalFlowHandler("preAuction");if(i){this.logger.info("invoking preAuction");try{i(e,t)}catch(e){this.logger.error("preAuction failed",e)}}},e}();t.Provider=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=function(){function e(e){this.wrapperId="browsi_adWrapper_ai_"+e.adIndex+"_ati_"+(e.attemptIndex?e.attemptIndex:1)+"_rc_"+(e.refresh.active?e.refresh.count:0),this.containerId="browsi_adContainer_ai_"+e.adIndex+"_ati_"+(e.attemptIndex?e.attemptIndex:1)+"_rc_"+(e.refresh.active?e.refresh.count:0),e.setDomId(this.wrapperId)}return e.prototype.appendAd=function(e,t){if(e.ref.parentNode){if(e.tableConfiguration){var i=e.tableConfiguration.mainTd.cloneNode();i.appendChild(t),e.ref.parentNode.insertBefore(i,e.ref)}else e.ref.parentNode.insertBefore(t,e.ref);n.Utils.reportNewBrowsiAd(t)}},e}();t.Embedder=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(0),o=i(2),s=i(3),a=i(5),d=function(){function e(){var e=this;this.logger=new n.Logger("LazySpots"),this.profile=o.Profiler.get(),this.lazySpots=[],this.lazySpotsLocations=[],this.lazyDynamicConfig=this.profile.lazySpots,this.lazyFixedStartIndex=this.profile.fixedSpotsConfig&&this.profile.fixedSpotsConfig.ll?this.profile.fixedSpotsConfig.ll:-1,this.lazyStatus={lastPosition:-1,positionListenerActive:!1,expectedNextPosition:-1,scrollDirection:"up",previousTime:-1},this.lazySpotsListener=r.Utils.throttle(function(){return e.checkLocationAndFetch()},100),this.postMovementTimeoutActive=!1,this.serviceActive=!1,this.userPositionInterval=null}return e.get=function(){return e._instance||(this._instance=new e),e._instance},e.isLazyConfiguredForSpotType=function(e,t){return!!(e===a.SpotType.DYNAMIC&&t.lazySpots||e===a.SpotType.FIXED&&t.fixedSpotsConfig.ll)},e.prototype.getThresholdMidPoint=function(e){if(e.isLazyLoading){e.offsetTop=r.Utils.getElementCoordinates(e.ref).top;var t=this.getThresholdLocation(e);return Math.floor(e.offsetTop-.5*(e.offsetTop-t))}return r.Utils.getScrollingDistance()},e.prototype.isLazy=function(e){return e.type===a.SpotType.FIXED?this.lazyFixedStartIndex>-1&&this.isAfterFirstConfiguredFold(e)&&e.typeIndex>=this.lazyFixedStartIndex:this.isAfterFirstConfiguredFold(e)&&e.typeIndex>=this.lazyDynamicConfig.fai},e.prototype.isAfterFirstConfiguredFold=function(e){return r.Utils.getElementFoldNumber(e.ref)>=this.lazyDynamicConfig.ff},e.prototype.subscribe=function(e,t){this.serviceActive||this.startService(),this.isSpotMissed(e)&&this.handleAdRequestBlock(e),e.offsetTop=r.Utils.getElementCoordinates(e.ref).top;var i=this.getThresholdLocation(e);this.logger.info(e.type+" spot "+e.typeIndex+" at "+e.offsetTop+" will start at "+i.toFixed(2)),this.lazySpots.push({spot:e,approvalsCount:0,thresholdLocation:i,fetchCallback:t}),this.lazySpotsLocations=this.lazySpots.sort(function(e,t){return e.spot.adIndex-t.spot.adIndex}).map(function(e){return{t:e.thresholdLocation,l:e.spot.offsetTop}}),this.fetchChecking()},e.prototype.getThresholdLocation=function(e){return e.offsetTop-r.Utils.getScreenSize().h*this.lazyDynamicConfig.t},e.prototype.stopService=function(){this.logger.info("stopping service"),window.top.removeEventListener("scroll",this.lazySpotsListener),clearInterval(this.userPositionInterval),this.serviceActive=!1,this.lazyStatus=this.getLazyStatus(!0),this.fetchChecking()},e.prototype.startService=function(){this.logger.info("starting service"),this.lazyStatus=this.getLazyStatus(!0),window.top.addEventListener("scroll",this.lazySpotsListener),this.startUserPositionInterval(),this.serviceActive=!0},e.prototype.getLazyStatus=function(e){var t=r.Utils.getScrollPosition().bottom,i=Date.now(),n=e?0:t-this.lazyStatus.lastPosition,o=e?0:i-this.lazyStatus.previousTime,s=e||this.lazyStatus.lastPosition<=t?"down":"up",a=this.lazyDynamicConfig.aft/o;return{scrollDirection:s,expectedNextPosition:0===o?t:t+n*a,previousTime:i,lastPosition:t,positionListenerActive:!e&&this.lazyStatus.positionListenerActive}},e.prototype.checkLocationAndFetch=function(){this.lazyStatus.positionListenerActive||this.startUserPositionInterval(),this.fetchChecking()},e.prototype.startUserPositionInterval=function(){var e=this;this.lazyStatus=this.getLazyStatus(),this.lazyStatus.positionListenerActive||(this.userPositionInterval=setInterval(function(){if(e.lazyStatus=e.getLazyStatus(),e.logger.debug("direction: ",e.lazyStatus.scrollDirection.toString(),"at ",r.Utils.getScrollPosition().bottom.toFixed(2),"spots threshold: ",e.lazySpotsLocations),e.noMovement()&&!e.postMovementTimeoutActive){var t=e.lazyStatus.lastPosition;setTimeout(function(){e.postMovementTimeoutActive=!1,t===e.lazyStatus.lastPosition&&(clearInterval(e.userPositionInterval),e.lazyDynamicConfig.su&&e.fetchChecking(!0),e.lazyStatus.positionListenerActive=!1,e.logger.debug("positionInterval stopped, static user"))},500),e.postMovementTimeoutActive=!0}},100)),this.lazyStatus.positionListenerActive=!0,this.logger.debug("positionInterval started")},e.prototype.noMovement=function(){return this.lazyStatus.lastPosition===this.lazyStatus.expectedNextPosition},e.prototype.fetchChecking=function(e){var t=this;if("down"===this.lazyStatus.scrollDirection)for(var i=0,n=this.lazySpots;i<n.length;i++){var r=n[i];if(this.isSpotMissed(r.spot))this.handleAdRequestBlock(r.spot),this.zeroApprovalsCount(r);else if(this.isUserInThreshold(r)){if(this.logger.debug("user in threshold of "+r.spot.type+" spot "+r.spot.typeIndex),this.isExpectedNextPositionOk(r)){r.approvalsCount++,(this.approvalsTargetReached(r)||e)&&(this.logger.info(r.spot.type+" spot "+r.spot.typeIndex+" is good for fetching ,"+r.approvalsCount+" /"+this.lazyDynamicConfig.ac),r.fetchCallback(),this.lazySpots.splice(this.lazySpots.indexOf(r),1),this.lazySpots.length||this.stopService());break}this.zeroApprovalsCount(r)}else this.zeroApprovalsCount(r)}else this.lazySpots.forEach(function(e){return t.zeroApprovalsCount(e)})},e.prototype.isSpotMissed=function(e){return r.Utils.getElementCoordinates(e.ref).top<=this.lazyStatus.lastPosition},e.prototype.handleAdRequestBlock=function(e){e.adRequestBlockedSent||(this.logger.debug(e.type+" spot "+e.typeIndex+" at position "+r.Utils.getElementCoordinates(e.ref).top+" missed, current position: "+r.Utils.getScrollPosition().bottom),s.EventsService.get().sendAdBlockedEvent(e,"lazy_ad_missed",""+r.Utils.getCurrentFoldDecimal()))},e.prototype.zeroApprovalsCount=function(e){e.approvalsCount>0&&this.logger.debug("approval count reset"),e.approvalsCount=0},e.prototype.isUserInThreshold=function(e){var t=r.Utils.getElementCoordinates(e.spot.ref).top;return this.lazyStatus.lastPosition<t&&this.lazyStatus.lastPosition>e.thresholdLocation},e.prototype.isExpectedNextPositionOk=function(e){return this.lazyStatus.expectedNextPosition<r.Utils.getElementCoordinates(e.spot.ref).top},e.prototype.approvalsTargetReached=function(e){return this.logger.debug("approval count is now "+e.approvalsCount+" and approvalsCountTarget is "+this.lazyDynamicConfig.ac),e.approvalsCount>=this.lazyDynamicConfig.ac},e}();t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(0),o=i(7),s=i(6),a=function(){function e(){var e=this;this.logger=new n.Logger("Viewability"),this.pendingObjects=[],this.viewabilityCheckInterval=150,this.elementsLocationUpdateInterval=500,this.viewabilityCheck=this.throttle(function(t){var i=r.Utils.getScrollPosition();0===e.pendingObjects.length?(window.top.removeEventListener("scroll",e.viewabilityCheck),e.logger.info("viewability check has stopped, no more elements")):e.pendingObjects.forEach(function(t){return e.checkElementViewability(t,i)})},this.viewabilityCheckInterval),this.elementsLocationCheck=this.throttle(function(t){0===e.pendingObjects.length&&window.top.removeEventListener("scroll",e.elementsLocationCheck)},this.elementsLocationUpdateInterval),s.Focus.instance.subscribe(this.onFocusChanged.bind(this))}return e.get=function(){return e._instance||(this._instance=new e),e._instance},e.prototype.subscribe=function(e){var t=this;this.pendingObjects.push(e),this.pendingObjects.forEach(function(e){return t.checkElementViewability(e,r.Utils.getScrollPosition())}),this.startWatching()},e.prototype.startWatching=function(){window.top.addEventListener("scroll",this.elementsLocationCheck),window.top.addEventListener("scroll",this.viewabilityCheck)},e.prototype.checkElementViewability=function(e,t){var i=this;if(this.isInView(e,t)){if(o.isNullOrUndefined(e.metrics.startTime)){e.metrics.startTime=Date.now(),this.logger.info(e.root()," is in view");var n=e.refreshInfo.shouldRefresh,s=setInterval(function(e){if(i.pendingObjects.includes(e)){var a=r.Utils.getScrollPosition();i.isInView(e,a)?(o.isNullOrUndefined(e.metrics.startTime)&&(e.metrics.startTime=Date.now()),e.metrics.duration=i.getViewedDuration(e),i.logger.debug(e.root(),"is in view for "+e.metrics.duration),n&&e.metrics.duration>=e.refreshInfo.rate&&(i.logger.info(e.root(),": "+e.metrics.duration+"ms have passed.starting to refresh"),clearInterval(s),i.pendingObjects.splice(i.pendingObjects.indexOf(e),1),e.refreshInfo.doRefresh()),i.shouldSendViewedImpression(e)&&(i.handleViewed(e,t),n||clearInterval(s))):(i.handleOUtOfView(e),clearInterval(s))}},this.viewabilityCheckInterval,e)}else e.metrics.duration=this.getViewedDuration(e);this.shouldSendViewedImpression(e)&&this.handleViewed(e,t)}else e.metrics.startTime&&this.handleOUtOfView(e)},e.prototype.handleOUtOfView=function(e){e.metrics.startTime&&(this.logger.debug(e.root()," is out of view after "+this.getViewedDuration(e)),e.metrics.startTime=null,e.metrics.duration=-1)},e.prototype.handleViewed=function(e,t){e.metrics.viewed=!0,e.refreshInfo.shouldRefresh?this.logger.debug(e.root(),"starting to count for refresh ("+e.metrics.duration+"ms out of "+e.refreshInfo.rate+"ms)"):this.pendingObjects.splice(this.pendingObjects.indexOf(e),1),this.logger.debug(e.root(),"after "+e.metrics.duration+"ms"),e.sendViewedImpression(Math.round(this.inViewPercentage(e,t)))},e.prototype.getViewedDuration=function(e){return e.metrics.startTime?Date.now()-e.metrics.startTime:-1},e.prototype.shouldSendViewedImpression=function(e){return!e.metrics.viewed&&e.metrics.duration>=e.conf.duration},e.prototype.throttle=function(e,t){var i=!1;return function(n){i||(e(n),i=!0,setTimeout(function(){i=!1,e(n)},t))}},e.prototype.isInView=function(e,t){if(!e.runCondition()||s.Focus.instance.isHidden)return!1;var i=this.inViewPercentage(e,t),n=i>=e.conf.minViewInitiator;return i>0&&this.logger.debug(e.root()," percentage in view: "+i.toFixed(2)+" , minViewInitiator: "+e.conf.minViewInitiator+", in view: "+n),n},e.prototype.inViewPercentage=function(e,t){var i=e.getCoords().top,n=e.getHeight();if(t.top<=i&&t.bottom>i){var r=t.bottom-i;return 100*Math.min(Number(r/n),1)}if(t.top>i&&t.top<i+n){r=i+n-t.top;return 100*Math.min(Number(r/n),1)}return 0},e.prototype.onFocusChanged=function(e){e||this.viewabilityCheck(null)},e}();t.ViewabilityService=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(37),o=i(0),s=i(2),a=i(3),d=i(13),l=function(){function e(){this._foundAds=[],this.logger=new n.Logger("ProvidersDetector"),this._foundAds=[],this.profile=s.Profiler.get()}return e.get=function(){return this.instance||(this.instance=new e),this.instance},Object.defineProperty(e.prototype,"foundAds",{get:function(){return this._foundAds},enumerable:!0,configurable:!0}),e.prototype.addIfNew=function(e,t,i,n,r,s,l,c){if(c||!this.isDetectedAlready(e)){var u=o.Utils.getElementPosition(e).y,p=this.resolveElementSize(e,l),f=this.getAdPositionType(e),h=-1!=f.indexOf("sticky")||-1!=f.indexOf("interstitial")?-1:o.Utils.getElementFoldNumber(e),g=0;if(c){var m=this._foundAds.find(function(t){return t.element===e});m&&(g=++m.refreshCount)}var y={providerName:t,positionType:f,element:e,topPos:u,foldNum:h,width:p.w,height:p.h,placementId:i,adUnit:n,isLazyLoaded:r,refreshCount:g};return this.foundAds.push(y),this.logger.info("Found provider on page: "+t+"("+p.w+"x"+p.h+")",e),a.EventsService.get().sendPublisherAdFound(y),d.ViewabilityService.get().subscribe(this.buildViewabilityServiceObject(y,l)),f}},e.prototype.buildViewabilityServiceObject=function(e,t){return{conf:{minViewInitiator:t&&t.w*t.h>=242500?30:50,duration:1e3},getCoords:function(){return o.Utils.getElementCoordinates(e.element)},getHeight:function(){return o.Utils.getElementSize(e.element).h},metrics:{duration:-1,startTime:null,viewed:!1},runCondition:function(){return!0},refreshInfo:{shouldRefresh:!1,rate:0,doRefresh:function(){}},sendViewedImpression:function(t){return a.EventsService.get().sendViewedPublisherAd(e,t)},root:function(){return e}}},e.prototype.getAdPositionType=function(e){var t=[],i=o.Utils.getElementSize(e),n=o.Utils.getElementPosition(e);if(o.Utils.isPositionFixed(e)&&i.w>.85*this.profile.deviceDetails.screenWidth&&i.h>.85*this.profile.deviceDetails.screenHeight)return t.push("interstitial"),t;if(o.Utils.isPositionFixed(e)&&t.push("sticky"),this.profile.domData&&this.profile.domData.mainContent.inputElements&&this.profile.domData.mainContent.start>-1){for(var r=this.profile.domData.mainContent,s=r.inputElements[0].getBoundingClientRect().width,a=o.Utils.getElementPosition(r.inputElements[0]).x,d=0,l=n.x,c=l+i.w,u=n.y,p=0;p<r.inputElements.length;p++)a=Math.min(a,o.Utils.getElementPosition(r.inputElements[p]).x),d=Math.max(d,a+s);this.logger.debug("MC start: "+r.start+",MC end: "+r.endPosition+",\n\t\t\tarticle offset left: "+a+", article offset right "+d+",ad offset right "+c+",\n\t\t\tad offset left "+l+", ad offset top "+u+", MC elements:",r.inputElements),l>=a&&c<=d?t.push("in-line"):(l<a&&c<=a&&t.push("left rail"),l>=d&&t.push("right rail")),-1==t.indexOf("sticky")&&(u<r.start&&t.push("top"),u>r.endPosition&&t.push("bottom")),-1!=t.indexOf("in-line")&&-1==t.indexOf("sticky")&&-1==t.indexOf("bottom")&&-1==t.indexOf("top")&&t.push("within main content")}else t.push("out of main content");return t},e.prototype.scan=function(e){return e&&r.default.start(),this.foundAds},e.prototype.addFoundProvider=function(e,t,i,n,r,o,s,a,d){return!!this.addIfNew(e,t,n,r,o,s,a,d)},e.prototype.isDetectedAlready=function(e){return!!this.foundAds.some(function(t){return t.element===e})||(!!o.Utils.isDescendantElement(this.foundAds.map(function(e){return e.element}),e)||this.foundAds.some(function(t){return o.Utils.isDescendantElement([e],t.element)}))},e.prototype.resolveElementSize=function(e,t){if(t)return t;var i=e.getBoundingClientRect();return{w:i.width,h:i.height}},e}();t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),r=i(1),o=i(20),s=i(2),a=i(0),d=i(9),l=i(36),c=i(4),u=i(14);i(38);var p=function(){function e(){this.logger=new r.Logger("App.ts"),this.profile=s.Profiler.get(),this.logger.info("profile: ",this.profile),s.Profiler.detectAdBlocker(function(){return n.EventsService.get().sendAdBlockerEvent()})}return e.prototype.run=function(){if(this.logger.info("started"),this.setUserEngagedListener(),a.Utils.getLoaderParams().e.le&&l.EngagementService.get().subscribe(),this.profile.identity.isBenchmarkPageview)this.SendBenchmarkEvents();else{this.profile.domData=s.Profiler.collectDOMData();var e=this.isProfileValid(this.profile.foldsConfiguration,this.profile.domData);if(a.Utils.shouldLookForFixed()&&e.validForFixed||e.validForDynamic){e.validForFixed||this.logger.warn("Invalid profile for FIXED spots",e.errorMessages),e.validForDynamic||this.logger.warn("Invalid profile for DYNAMIC spots",e.errorMessages);var t=(new o.default).findSpots(e.validForFixed,e.validForDynamic);c.default.instance.setSpots(t);var i=this.profile.analysisMode;t.length&&(i?this.logger.custom("AnalysisMode ON",a.Utils.getLogStyle(18,"red","#000")):d.YieldClient.get().processSpots(t))}else this.profile.state="error",this.logger.warn("Invalid profile",e.errorMessages),n.EventsService.get().sendPageviewEvent(0,0,e.errorMessages)}u.default.get().scan(!0),a.Utils.buildBrowsiOutput(this.profile)},e.prototype.isProfileValid=function(e,t){var i=[];a.Utils.getLoaderParams().e.fs&&(i=s.Profiler.validateProfileForBehavior(e,t.fixedCompatibleSizes,t.fixedSpotsElements).map(function(e){return"FIXED_"+e}));var n=s.Profiler.validateProfileForBehavior(e,t.dynamicCompatibleSizes,t.mainContent.elements).map(function(e){return"DYNAMIC_"+e});return{validForFixed:0===i.length,validForDynamic:0===n.length,errorMessages:i.concat(n)}},e.prototype.SendBenchmarkEvents=function(){this.logger.custom("Benchmark Mode",a.Utils.getLogStyle(30,"black","red")),n.EventsService.get().sendPageviewEvent(0,0),this.profile.state="done",n.EventsService.get().sendSpotEngineDoneEvent()},e.prototype.setUserEngagedListener=function(){var e=this;if(a.Utils.getScrollPosition().top>0)n.EventsService.get().sendUserEngagementEvent();else{var t=function(){e.logger.info("detected engagementScroll, send event"),window.top.removeEventListener("scroll",t),e.profile.engagedUsers.engaged=!0,n.EventsService.get().sendUserEngagementEvent()};window.top.addEventListener("scroll",t)}},e.prototype.desktopRunner=function(){var e=a.Utils.getExternalFlowHandler("engineInitiator");if(e)try{this.logger.info("executing engineInitiator"),e(a.Utils.getLoaderParams(),this.run.bind(this))}catch(e){this.logger.error("failed to execute engineInitiator",e)}else this.run()},e}();function f(){if(("interactive"===document.readyState||"complete"===document.readyState)&&!window._middyo.loaded){window._middyo.loaded=!0;var e=a.Utils.getLoaderParams().e.t,t=new p;e?(t.logger.info("waiting "+e+"mc"),setTimeout(function(){t.desktopRunner()},e)):t.desktopRunner()}}n.EventsService.get().sendEngineLoadedEvent(),window.top.document.onreadystatechange=function(){return f()},window.top.document.addEventListener("readystatechange",function(){return f()}),f()},function(e,t){var i,n,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var d,l=[],c=!1,u=-1;function p(){c&&d&&(c=!1,d.length?l=d.concat(l):u=-1,l.length&&f())}function f(){if(!c){var e=a(p);c=!0;for(var t=l.length;t;){for(d=l,l=[];++u<t;)d&&d[u].run();u=-1,t=l.length}d=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new h(e,t)),1!==l.length||c||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(0),o=i(2),s=function(){function e(){var e=this;this.observer=null,this.noneFixedHeight=0,this.fixedHeight=0,this.isFixedHeader=!1;var t=o.Profiler.get().fixedHeader;if(this.logger=new n.Logger("FixedHeader"),t&&"function"==typeof window.MutationObserver){var i=t.s,r=document.querySelector(i);r&&(this.updateProperties(r),this.noneFixedHeight=t.h,this.observer=new MutationObserver(function(t){e.updateProperties(r)}),this.observer.observe(r,{attributes:!0}),this.logger.info("found header, watching ",r,t))}}return e.prototype.updateProperties=function(e){var t=this.isHeaderFixed(e);this.isFixedHeader!==t&&this.logger.debug("header fixed: "+t),this.isFixedHeader=t,this.fixedHeight=this.isFixedHeader?r.Utils.getElementSize(e).h:0},e.get=function(){return e._instance||(this._instance=new e),e._instance},e.prototype.getFixedHeaderSize=function(){return this.fixedHeight},e.prototype.getNoneFixedHeaderSize=function(){return this.isFixedHeader?this.noneFixedHeight:0},e.prototype.isHeaderFixed=function(e){return e&&r.Utils.isPositionFixed(e)},e}();t.FixedHeaderService=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(21),o=i(1),s=i(3),a=i(34),d=i(2),l=i(4),c=i(5),u=i(12),p=i(35),f=function(){function e(){this.logger=new o.Logger("SpotEngine"),this.profile=d.Profiler.get(),this.availableSpots=[],this.dynamicSpots=[],this.fixedSpots=[],this.lastScannedElement=null,this.firstScannedElement=null,this.isMenuPositionFixed=!1,this.spotsStrategy=new a.DefautlSpotsStrategy,this.currentSpotType=c.SpotType.DYNAMIC,this.wrappedElements=[],this.profile.debugMode&&(this.profile.spotEngineTest={})}return e.prototype.findSpots=function(e,t){var i=this;return n.Utils.shouldLookForFixed()&&e&&(this.logger.info("Scanning for fixed spots..."),this.fixedSpots=this.scanFixedSpots(),this.logger.custom("Fixed spots found: "+this.fixedSpots.length,n.Utils.getLogStyle(18,"black","green"),this.fixedSpots)),t&&(this.logger.info("Scanning for dynamic spots..."),this.dynamicSpots=this.scanDynamicSpots(),this.logger.custom("Dynamic spots found: "+this.dynamicSpots.length,n.Utils.getLogStyle(18,"black","green"),this.dynamicSpots)),this.availableSpots=n.Utils.sortSpotsByPosition.apply(n.Utils,this.fixedSpots.concat(this.dynamicSpots)),this.availableSpots.forEach(function(e,t){e.adIndex=t,u.default.isLazyConfiguredForSpotType(e.type,i.profile)&&(e.isLazyLoading=u.default.get().isLazy(e)),s.EventsService.get().sendSpotFoundEvent(e),i.logger.info("Found "+e.type+" spot",e.ref)}),s.EventsService.get().sendPageviewEvent(this.dynamicSpots.length,this.fixedSpots.length),s.EventsService.get().sendSpotEngineDoneEvent(),this.profile.debugMode&&(this.buildSpotEngineTest(),this.profile.state="done"),this.availableSpots},e.prototype.scanFixedSpots=function(){var e=this,t=[];if(!this.profile.domData)return t;for(var i=function(i){if(o.isBelowStopInFold(i))return o.logger.debug("invalid spot [below stop in fold]:",i),"continue";if("invalid"===o.validateSpot(i,!0).status)return"continue";var s=n.Utils.clone(o.profile.domData.fixedCompatibleSizes).filter(function(t){return!e.isCompSizeBiggerThanParentSize(t,i)}),a=o.getCompatibleAdsSizes(i,0,c.SpotType.FIXED,s);if(a.length>0){var d=new r.Spot(i,t.length,a,0,c.SpotType.FIXED);o.logger.info("New fixed spot found: ",d.ref),t.push(d)}else o.logger.debug("invalid fixed spot [no compatible size found]:",i);return t.length>=o.profile.fixedSpotsConfig.mi?"break":void 0},o=this,s=0,a=this.profile.domData.fixedSpotsElements;s<a.length;s++){if("break"===i(a[s]))break}return t},e.prototype.scanDynamicSpots=function(){var e=this,t=[];if(!this.profile.domData)return t;for(var i=function(i){if(o.wrappedElements.includes(i))return"continue";if(o.spotsStrategy.stopScanning(t))return o.lastScannedElement=i.previousElementSibling,"break";if(o.isBelowStopInFold(i))return o.lastScannedElement=i.previousElementSibling,o.logger.debug("SpotEngine Stopped. StopIF = "+o.profile.foldsConfiguration.stop+", reached element at fold "+n.Utils.getElementFoldNumber(i)+": ",i),"break";if("invalid"===o.validateSpot(i,!1).status)return"continue";var s=n.Utils.clone(o.profile.domData.dynamicCompatibleSizes).filter(function(t){return!e.isCompSizeBiggerThanParentSize(t,i)}),a=o.getNextParagraphsTotalHeight(i,o.profile.wrappingAdditionalElements,s),d=o.getCompatibleAdsSizes(i,a,c.SpotType.DYNAMIC,s);if("invalid"===o.validateStayAway(i,t,d,!0).status)return"continue";if(d.length>0){var l=new r.Spot(i,t.length,d,a,c.SpotType.DYNAMIC);o.logger.info("New dynamic spot found: ",l.ref),t.push(l)}else o.logger.debug("invalid dynamic spot [no compatible size found]:",i)},o=this,s=0,a=this.profile.domData.mainContent.elements;s<a.length;s++){if("break"===i(a[s]))break}return this.logger.info("Spots found before filtering: ",t),this.spotsStrategy.selectSpots(t)},e.prototype.isSkippedElement=function(e){return this.profile.domData&&this.profile.domData.skippedElements.some(function(t){return n.Utils.isDescendantElement([t],e)})?{status:"invalid",message:"skipped element"}:{status:"valid"}},e.prototype.isBrowsiStayAway=function(e,t,i){var r=this;return this.alreadyFoundSpots(t)&&t.concat(this.fixedSpots.filter(function(e){return e.positionTypes.includes("in-line")})).some(function(t){var o=n.Utils.calculateDistanceBetween(e,t.ref),s=n.Utils.getHighestElement(e,t.ref),a=e===s?i:t.compatibleSizes,d=n.Utils.getMaxWrapSize(a),l=n.Utils.isPositionedAfter(t.ref,e)&&!n.Utils.isContainedElement(e,t.ref)?n.Utils.getMaxWrappingOffsetDistance(e,d):0;return o+s.getBoundingClientRect().height+l<=r.profile.spotsConfig.d})?{status:"invalid",message:"stay away from browsi"}:{status:"valid"}},e.prototype.alreadyFoundSpots=function(e){return!(!(e.length>0||this.fixedSpots.length>0)||!this.profile.foldsConfiguration)},e.prototype.isAboveStartInFold=function(e){var t=n.Utils.getElementFoldNumber(e);return this.profile.foldsConfiguration&&t<this.profile.foldsConfiguration.start?{status:"invalid",message:"above startIF("+t+")"}:(this.firstScannedElement||(this.firstScannedElement=e),{status:"valid"})},e.prototype.isBelowStopInFold=function(e){var t=n.Utils.getElementFoldNumber(e);if(this.profile.foldsConfiguration)if(this.profile.foldsConfiguration.stop===Math.floor(this.profile.foldsConfiguration.stop)){if(Math.floor(t)>this.profile.foldsConfiguration.stop)return!0}else if(t>this.profile.foldsConfiguration.stop)return!0;return!1},e.prototype.getNextParagraphsTotalHeight=function(e,t,i){for(var r=0,o=n.Utils.getMaxWrapSize(i),s=0;e&&r<o.h&&(!n.Utils.isElement(e)||"valid"===this.isSkippedElement(e).status&&"valid"===l.default.instance.isStayAwayElement(e).status);){if(n.Utils.isElement(e)){if(["auto","hidden","overlay","scroll"].includes(getComputedStyle(e).overflow||""))return this.logger.debug("Stopped height calc. overflow: "+getComputedStyle(e).overflow+". current height: "+r,e),r;!n.Utils.isVisible(e)&&r>0&&e.nextSibling&&(e=e.nextSibling)}switch(e.nodeName){case"BR":break;case"P":if(this.hasNonWrappingChildren(e))return r;n.Utils.isEmptyParagraph(e)?s+=e.getBoundingClientRect().height:(r+=e.getBoundingClientRect().height+s,s=0);break;case"#text":r+=n.Utils.calculateTextNodeHeight(e)+s,s=0;break;default:if(t.includes(e.nodeName)&&!this.hasNonWrappingChildren(e)){r+=e.getBoundingClientRect().height+s,s=0;break}return r}this.wrappedElements.push(e),e=e.nextSibling}return r},e.prototype.hasNonWrappingChildren=function(e){var t=e.querySelector("img, iframe");return!!t&&(this.logger.info("stopping height calc because "+e.nodeName+" element has special child: ",t),!0)},e.prototype.getCompatibleAdsSizes=function(e,t,i,n){var r=[];if(!this.profile.domData)return r;for(var o=e.getBoundingClientRect().height,s=0,a=n;s<a.length;s++){var d=a[s],l=i===c.SpotType.DYNAMIC?d.optionalEmbeddings.indexOf("wrapped"):-1;l>-1?this.isSizeValidForWrapping(t,o,d)||d.optionalEmbeddings.splice(l,1):i===c.SpotType.FIXED&&(d.selectedEmbedding="break"),d.optionalEmbeddings.length&&r.push(d)}return r},e.prototype.isSizeValidForWrapping=function(e,t,i){return t>=i.minSizeForWrapping&&e>0||e>=i.minSizeForWrapping},e.prototype.buildSpotEngineTest=function(){if(this.lastScannedElement&&this.firstScannedElement){var e=n.Utils.getElementFoldNumber(this.lastScannedElement),t=n.Utils.getElementFoldNumber(this.firstScannedElement);this.profile.spotEngineTest={firstElementFold:t,lastElementFold:e,spots:this.availableSpots}}else this.profile.spotEngineTest={spots:this.availableSpots}},e.prototype.validateSpot=function(e,t){var i=this.isAboveStartInFold(e).message||this.isSkippedElement(e).message||(t?null:this.isEmptyParagraph(e).message||this.isElementWithFloatSibling(e).message)||this.isBetweenTitleAndContent(e).message,n=i?{status:"invalid",message:i}:{status:"valid"};return"invalid"===n.status&&this.logger.debug("invalid spot ["+n.message+"]:",e),n},e.prototype.isEmptyParagraph=function(e){return n.Utils.isEmptyParagraph(e)?{status:"invalid",message:"empty"}:{status:"valid"}},e.prototype.isCompSizeBiggerThanParentSize=function(e,t){var i=!1;if(t.parentElement){var r=n.Utils.getElementSize(t.parentElement);r&&e.w>r.w&&(i=!0)}return i},e.prototype.validateStayAway=function(e,t,i,n){var r=l.default.instance.isStayAwayForAllEmbedTypes(e,i,n),o=r.message?null:this.isBrowsiStayAway(e,t,i).message,s=r.message||o,a=s?{status:"invalid",message:s}:{status:"valid"};return"invalid"===a.status&&(r.message?this.logger.debug("invalid spot ["+a.message,{element:e,stayAwayElement:r.element}):this.logger.debug("invalid spot ["+a.message+"]:",e)),a},e.prototype.isElementWithFloatSibling=function(e){return this.profile.domData&&this.profile.domData.foundFloatElements.includes(e)?{status:"invalid",message:"element with float sibling"}:{status:"valid"}},e.prototype.isBetweenTitleAndContent=function(e){return this.profile.disableSpotAfterTitle&&p.default.get().isBetweenTitleAndContent(e)?{status:"invalid",message:"element is between title and content"}:{status:"valid"}},e}();t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),o=i(2),s=i(9),a=i(13),d=i(3),l=function(){function e(t,i,o,s,a){this.conf={minViewInitiator:50,duration:1e3},this.wholeConf={minViewInitiator:100,duration:1e3},this.ref=t,this.adIndex=-1,this.type=a,this.typeIndex=i,this.attemptIndex=1,this.isSaas=!1,this.compatibleSizes=o,this.availableHeight=s,this.offsetTop=n.Utils.getElementCoordinates(t).top,this.viewability={viewed:!1,duration:-1},this.browsiAd={h:-1,w:-1},this.isImpression=!1,this.logger=new r.Logger("Spot"),this.refresh={refreshed:!1,requested:!1,active:!1,cap:0,count:0,impressionsEventCount:0,rate:0,do:!1,kv:!1};var d=this.getTableIfExists();if(d){var l=document.createElement("tr"),c=document.createElement("td");c.setAttribute("colspan",100..toString()),c.setAttribute("style","width: 100%; display: none;"),l.appendChild(c),this.tableConfiguration={table:d,columns:100,adWrapper:l,mainTd:c}}this.adRequestBlockedSent=!1,this.isLazyLoading=!1,this.spotRenderEnded=0,this.expectedViewability=-99,this.positionTypes=e.getPositionType(t)}return e.prototype.getExpectedEmbedding=function(){var e=this.compatibleSizes.map(function(e){return e.selectedEmbedding});if(1!==n.Utils.toSet(e).size)return"na";switch(e[0]){case"break":return"b";case"right":return"r";case"left":return"l";default:return"na"}},e.prototype.expend=function(e){var t=this;return new Promise(function(i,r){if(t.browsiAd.wrapper){var o=n.Utils.isFluidSize(e),s=document.querySelector("#"+t.browsiAd.wrapper.id);if(s){var a=t.tableConfiguration&&s&&s.parentElement?s.parentElement:null;s.setAttribute("height",""+(o?"auto":e.h)),s.setAttribute("width",""+(o?"100%":e.w)),s.setAttribute("style",t.getEmbeddingStyle(e)),a&&a.setAttribute("style","width: 100%;"),t.browsiAd.iframe&&t.browsiAd.iframe.setAttribute("style","text-align:center;display: block;margin: auto;width: "+e.w+"px !important; height: "+e.h+"px !important;");var d=n.Utils.getElementCoordinates(s);o?setTimeout(function(){var e=s.getBoundingClientRect();t.browsiAd.w=e.width,t.browsiAd.h=e.height,t.browsiAd=n.Utils.merge(t.browsiAd,{offsetTop:d.top,offsetLeft:d.left}),i({w:t.browsiAd.w,h:t.browsiAd.h})},800):(t.browsiAd=n.Utils.merge(t.browsiAd,{offsetTop:d.top,offsetLeft:d.left}),i({w:t.browsiAd.w,h:t.browsiAd.h}))}}else r({w:-1,h:-1})})},e.prototype.setExpectedViewability=function(e){if(e.od&&e.od.ue){var t=Number(e.od.ue);this.expectedViewability=t<0?Number(t):Number(t.toFixed(3))}},e.prototype.getDomId=function(){return this.domId||"e"},e.prototype.setDomId=function(e){this.domId=e},e.prototype.getEmbeddingStyle=function(e){var t="";return e.selectedEmbedding?t=this.buildStyle(e,o.Profiler.get().spotsConfig.s):this.logger.error("no embedding for spot "+this.adIndex,this.browsiAd.wrapper),t},e.prototype.buildStyle=function(e,t){var i="";if("break"===e.selectedEmbedding){var r=n.Utils.isFluidSize(e);i="text-align:center;display:block;clear: both !important;"+(a="margin: auto;margin-top:"+t.b.m.t+"px !important;margin-bottom:"+t.b.m.b+"px !important")+";width:"+(r?"100%":"auto")+" !important; height: auto !important;"}else{var o="left"===e.selectedEmbedding?t.l:t.r,s=getComputedStyle(this.ref),a="margin-top:"+(-1===o.m.t?parseInt(s.marginTop||"0"):o.m.t)+"px !important;\n                             margin-right:"+o.m.r+"px !important;\n                             margin-bottom:"+o.m.b+"px !important;\n                             margin-left:"+o.m.l+"px !important",d="padding-top:"+(-1===o.p.t?parseInt(s.paddingTop||"0"):o.p.t)+"px !important;\n                             padding-right:"+o.p.r+"px !important;\n                             padding-bottom:"+o.p.b+"px !important;\n                             padding-left:"+o.p.l+"px !important";i="text-align:center;float:"+e.selectedEmbedding+";position:relative;"+n.Utils.removeSpaces(a)+";"+n.Utils.removeSpaces(d)+";width:"+e.w+"px !important; height:"+e.h+"px !important;"}return i},e.prototype.getTableIfExists=function(){return this.ref?n.Utils.findParentElementByType("table",this.ref):null},e.prototype.updateRefreshDetails=function(e){this.refresh.requested||this.isAllowedProvider(e)&&(this.refresh=Object.assign(this.refresh,{active:e.ri&&e.ri.e,refreshed:!!this.refresh.refreshed&&this.refresh.refreshed,requested:!!this.refresh.requested&&this.refresh.requested,count:this.refresh.count?this.refresh.count:0,impressionsEventCount:this.refresh.impressionsEventCount?this.refresh.impressionsEventCount:0,cap:e.ri&&e.ri.c?e.ri.c:0,rate:e.ri&&e.ri.r?e.ri.r:0,do:!(!e.ri||!e.ri.do)&&e.ri.do,kv:!(!e.ri||!e.ri.kv)&&e.ri.kv}))},e.prototype.removeAdFromDom=function(){if(this.browsiAd.wrapper){var e=document.querySelector("#"+this.browsiAd.wrapper.id);if(!(e&&document.body.contains(e)&&e.parentNode))return!1;if(this.removeAdMarkingFromDom(),!this.tableConfiguration)return e.parentNode.removeChild(e),!0;var t=e.parentElement;if(t&&t.parentNode)return t.parentNode.removeChild(t),!0}return!1},e.prototype.removeAdMarkingFromDom=function(){return!(!this.browsiAd.admarking||!this.browsiAd.admarking.parentNode)&&(this.browsiAd.admarking.parentNode.removeChild(this.browsiAd.admarking),delete this.browsiAd.admarking,!0)},e.prototype.refreshSpot=function(){this.canRefresh()&&(this.logger.info("Refreshing spot #"+this.adIndex),this.refresh=Object.assign(this.refresh,{requested:!0,refreshed:!1,oldWrapper:this.browsiAd.wrapper}),this.refresh.count++,this.waterfall=[],s.YieldClient.get().processSingleSpot(this))},e.prototype.canRefresh=function(){return!this.isRefreshing()&&this.spotShouldRefresh()},e.prototype.isRefreshing=function(){return this.refresh.active&&this.refresh.requested&&!this.refresh.refreshed},e.prototype.spotShouldRefresh=function(){return this.refresh.active&&this.refresh.count<this.refresh.cap},e.prototype.endRefreshProcess=function(){this.logger.debug("end refresh process for spot #"+this.adIndex),this.refresh.requested=!1,this.refresh.refreshed=!1},e.prototype.handleRefreshedDone=function(){this.isRefreshing()&&(this.refresh.oldWrapper&&(n.Utils.removeElement(this.refresh.oldWrapper),n.Utils.reportBrowsiAdRemoved(this.refresh.oldWrapper)),this.refresh.requested=!1,this.refresh.refreshed=!0,this.viewability={viewed:!1,duration:-1,startTime:void 0},this.logger.info("spot #"+this.adIndex+" refreshed with count "+this.refresh.count))},e.prototype.updateBrowsiAdWrapper=function(){this.refresh.oldWrapper&&(this.browsiAd.wrapper=this.refresh.oldWrapper,this.domId=this.refresh.oldWrapper.id,this.browsiAd.container=document.getElementById(this.refresh.oldWrapper.id.replace("adWrapper","adContainer"))||void 0)},e.prototype.isAllowedProvider=function(e){return"header_bidding"!==this.providerName||!!e.c.d},Object.defineProperty(e.prototype,"refreshInfo",{get:function(){var e=this;return{shouldRefresh:this.spotShouldRefresh(),rate:this.refresh.rate,doRefresh:function(){return e.refreshSpot()}}},enumerable:!0,configurable:!0}),e.prototype.sendViewedImpression=function(e){d.EventsService.get().sendViewedImpression(this,e)},e.prototype.sendViewedImpression100=function(e){d.EventsService.get().sendViewedImpression100(this)},e.getPositionType=function(e){var t=o.Profiler.get(),i=[],r=n.Utils.getElementSize(e),s=n.Utils.getElementPosition(e);if(t.domData&&t.domData.mainContent.inputElements&&t.domData.mainContent.start>-1){for(var a=t.domData.mainContent,d=a.inputElements[0].getBoundingClientRect().width,l=n.Utils.getElementPosition(a.inputElements[0]).x,c=0,u=s.x,p=Math.round(u+r.w),f=s.y,h=0;h<a.inputElements.length;h++)l=Math.min(l,n.Utils.getElementPosition(a.inputElements[h]).x),c=Math.max(c,l+d);u>=l&&p<=c?i.push("in-line"):(u<l&&p<=l&&i.push("left rail"),u>=c&&i.push("right rail")),f<a.start&&i.push("top"),f>a.endPosition&&i.push("bottom"),-1!=i.indexOf("in-line")&&-1==i.indexOf("bottom")&&-1==i.indexOf("top")&&i.push("within main content")}else i.push("out of main content");return 0===i.length&&i.push("unknown"),i},e.prototype.subscribeToViewabilityService=function(){a.ViewabilityService.get().subscribe(this.buildViewabilityServiceObject(this.wholeConf)),a.ViewabilityService.get().subscribe(this.buildViewabilityServiceObject(this.conf))},e.prototype.buildViewabilityServiceObject=function(e){var t=this,i=e.minViewInitiator===this.wholeConf.minViewInitiator,r=i?this.sendViewedImpression100.bind(this):this.sendViewedImpression.bind(this);return{conf:e,getCoords:function(){return n.Utils.getSpotCoords(t)},getHeight:function(){return t.browsiAd.h},metrics:{duration:-1,startTime:null,viewed:!1},runCondition:function(){return t.isImpression},refreshInfo:i?{shouldRefresh:!1,rate:0,doRefresh:function(){}}:this.refreshInfo,sendViewedImpression:r,root:function(){return t}}},e}();t.Spot=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(23),r=i(24),o=i(25),s=i(26),a=function(){function e(){}return e.getProvider=function(e,t){switch(e.rt){case"provider":var i=e;switch(i.c.p){case"dfp":return new n.DFP(t);case"appnexus_inv_code":return new r.SingleBidder(t,"appnexus",i.c);case"appnexus":case"adform":case"sovrn":case"districtmdmx":case"pulsepoint":case"aol":case"openx":case"rubicon":case"smart_ad_server":case"ad_you_like":case"audiencenetwork":case"criteo":case"index_exchange":case"lockerdome":case"pubmatic":case"brealtime":case"sharethrough":case"sonobi":case"gum_gum":case"triple_lift":case"across":case"conversant":case"kargo":case"medianet":case"yieldmo":case"onemobile":case"districtm":case"adkernel":case"aja":case"yjax":case"rdn":case"dgads":return new r.SingleBidder(t,i.c.p,i.c);default:return null}case"header_bidding":var a=e;return t.providerName="header_bidding",a.c.d?new s.HeaderBiddingDA(t,a.c.c,a.c.d):new o.HeaderBidding(t,a.c.c)}return null},e}();t.ProviderFactory=a},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=i(10),s=i(3),a=i(1),d=i(0),l=i(7),c=i(6),u=function(e){function t(t){var i=e.call(this,t,"dfp")||this;return i.logger=new a.Logger("DFP"),i.hasFluidSizeSupport=!0,i}return r(t,e),t.prototype.fetch=function(e,t){var i=this;return new Promise(function(n){i.logger.info("fetching spot "+i.spot.adIndex,i.spot),t.appendAndGetWrapper(i.spot).then(function(e){return i.addGPTScriptTag(e)}).then(function(t){return i.pushGoogleTagCommands(t,e)}).then(function(e){return n(e)}).catch(function(e){i.logger.error("fetching failed: ",e),n({status:"error"})})})},t.prototype.pushGoogleTagCommands=function(e,t){var i=this;return new Promise(function(n){c.Focus.instance.waitForUserFocusWithAdBlock(i.spot).then(function(){var r=i.buildSizesArray(),o=i.getGoogletag(e);o.cmd.push(function(){var a=i.getAdSelector(),d=o.defineSlot("/"+t.c.a.pubID+"/"+t.c.au,r,a).addService(o.pubads());i.addKeyValues(t,d),i.logger.info("spot "+i.spot.adIndex+", definedSlot: "+d.getAdUnitPath()+", sizes:"+JSON.stringify(r)+", keyValue: "+JSON.stringify(d.getTargetingMap()));var l=setTimeout(function(){return i.handleAdMatchFalse(d,n)},t.c.t);o.pubads().addEventListener("slotRenderEnded",function(e){return i.slotRenderEndedEvent(e,n,l,d)}),i.display(o,a,d,t,!!e.iframe),s.EventsService.get().sendAdRequest(i.spot,i.providerName)})})})},t.prototype.handleAdMatchFalse=function(e,t){(s.EventsService.get().sendAdMatchedEvent(this.spot,"dfp",!1),this.spot.isRefreshing())||(this.spot.isImpression=!1,this.getGoogletag(this.spot.browsiAd).destroySlots([e]));t({status:"failure"})},t.prototype.getGoogletag=function(e){return e.win&&e.win.googletag||{}},t.prototype.display=function(e,t,i,n,r){var o="false"===n.c.a.upc||!n.c.a.upc;r?(e.enableServices(),e.display(t)):(e.pubads().disableInitialLoad(),e.enableServices(),window.google_DisableInitialLoad?(e.display(t),e.pubads().refresh([i],{changeCorrelator:o})):(1===e.pubads().getSlots().length&&e.display(t),e.pubads().refresh([i],{changeCorrelator:o})))},t.prototype.slotRenderEndedEvent=function(e,t,i,n){n==e.slot&&(this.getAdSelector()===e.slot.getSlotElementId()?(this.spot.spotRenderEnded++,clearTimeout(i),this.isForcedRefresh()?this.handleFocedRefreshRenderEnded(e):this.handleRenderEnded(e,t)):this.spot.isRefreshing()&&clearTimeout(i))},t.prototype.handleFocedRefreshRenderEnded=function(e){s.EventsService.get().sendAdMatchedEvent(this.spot,"dfp",!e.isEmpty,void 0,"forced_refresh"),e.isEmpty||s.EventsService.get().sendAdImpression(this.spot,this.providerName)},t.prototype.handleRenderEnded=function(e,t){if(e.isEmpty)this.handleAdMatchFalse(e.slot,t);else{var i=d.Utils.getDfpEventSize(e);this.spot.selectedSize=d.Utils.findSizeInSpot(this.spot,i),this.spot.providerName=this.providerName,this.spot.browsiAd=Object.assign({},this.spot.browsiAd,i),s.EventsService.get().sendAdMatchedEvent(this.spot,"dfp",!0),l.isNullOrUndefined(this.spot.selectedSize)?(this.logger.warn("No size match for spot: ",this.spot,e),t({status:"error"})):this.expendAd(this.spot.selectedSize,t)}},t.prototype.isForcedRefresh=function(){return this.spot.spotRenderEnded>this.spot.attemptIndex&&!this.spot.isRefreshing()},t.prototype.getAdSelector=function(){return this.spot.browsiAd.container&&this.spot.browsiAd.container.id||""},t}(o.Provider);t.DFP=u},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=i(8),s=i(1),a=i(3),d=i(0),l=function(e){function t(t,i,n){var r=e.call(this,t,i,[n],null)||this;return r.hasFluidSizeSupport=!1,r.logger=new s.Logger("SingleBidder"),r}return r(t,e),t.prototype.handlePbjsCommands=function(e,t,i,n){var r=this;this.adUnit=this.buildAdUnit(t.container&&t.container.id||"",e.od),this.pbjsInstance&&(this.runPreAuction(this.spot,this.adUnit),this.pbjsInstance.que=this.pbjsInstance.que||[],this.pbjsInstance.que.push(function(){r.pbjsInstance&&(r.pbjsInstance.setConfig(r.getConfig()),r.addCustomConfigByProvider([e.c]),a.EventsService.get().sendAdRequest(r.spot,r.providerName),r.adUnit&&r.pbjsInstance.addAdUnits(r.adUnit),r.pbjsInstance.requestBids({adUnitCodes:[r.adUnit?r.adUnit.code:""],bidsBackHandler:function(o){return r.bidsBackHandler(o,t,e,i,n)}}))}))},t.prototype.bidsBackHandler=function(e,t,i,n,r){if(t.wrapper&&t.iframe&&t.container){var o=this.getHighestBidById(e,t.container.id);if(this.pbjsInstance&&o&&o.adId&&o.width&&o.height){var s={w:o.width,h:o.height};this.spot.selectedSize=d.Utils.findSizeInSpot(this.spot,s),this.spot.providerName=this.providerName,this.spot.browsiAd=Object.assign({},this.spot.browsiAd,s);var l=Number(o.cpm),c=o.currency||"NA";a.EventsService.get().sendAdMatchedEvent(this.spot,this.providerName,!0,o.bidder,void 0,l,c);var u=this.buildIframe(t.wrapper.id,o);if(t.iframe.contentDocument.body.appendChild(u),this.spot.selectedSize)return this.pbjsInstance.renderAd(u.contentWindow.document,o.adId),this.expendAd(this.spot.selectedSize,n);n({status:"failure"})}}this.spot.isImpression=!1,a.EventsService.get().sendAdMatchedEvent(this.spot,this.providerName,!1,"NA",void 0,-1,"NA"),n({status:"failure"})},t}(o.PrebidJs);t.SingleBidder=l},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=i(8),s=i(1),a=i(3),d=function(e){function t(t,i){var n=e.call(this,t,"header_bidding",i,null)||this;return n.logger=new s.Logger("HB"),n}return r(t,e),t.prototype.handlePbjsCommands=function(e,t,i,n){var r=this;this.adUnit=this.buildAdUnit(t.container&&t.container.id||"",e.od),this.pbjsInstance&&(this.runPreAuction(this.spot,this.adUnit),this.pbjsInstance.que=this.pbjsInstance.que||[],this.pbjsInstance.que.push(function(){r.pbjsInstance&&(r.pbjsInstance.setConfig(r.getConfig(e,!0)),r.addCustomConfigByProvider(e.c.c),a.EventsService.get().sendAdRequest(r.spot,r.providerName),r.adUnit&&(r.pbjsInstance.addAdUnits(r.adUnit),r.sendBidRequests(r.adUnit)),r.pbjsInstance.requestBids({adUnitCodes:[r.adUnit?r.adUnit.code:""],bidsBackHandler:function(o){return r.bidsBackHandler(o,t,e,i,n)}}))}))},t.prototype.bidsBackHandler=function(e,t,i,n,r){if(t.container){var o=this.getHighestBidById(e,t.container.id);if(this.pbjsInstance&&o&&o.adId&&o.width&&o.height&&o.adUnitCode)return this.handleBidSuccess(e,o,t,i,n);this.logger.hbLog(e,t.container.id,this.getNoBids(t.container.id),o?o.bidder:"")}this.spot.isImpression=!1;var s=t.container?t.container.id:"";return this.sendBidMatchedEvents(s),a.EventsService.get().sendAdMatchedEvent(this.spot,"header_bidding",!1,"NA"),n({status:"failure"})},t}(o.PrebidJs);t.HeaderBidding=d},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=i(8),s=i(1),a=i(3),d=i(0),l=function(e){function t(t,i,n){var r=e.call(this,t,"header_bidding",i,n)||this;return r.logger=new s.Logger("HB"),r}return r(t,e),t.prototype.handlePbjsCommands=function(e,t,i,n){var r=this;this.isRefreshDfpOnly(e)?e.c.c=[]:this.adUnit=this.buildAdUnit(t.container&&t.container.id||"",e.od),this.pbjsInstance&&(this.runPreAuction(this.spot,this.adUnit),this.pbjsInstance.que=this.pbjsInstance.que||[],this.pbjsInstance.que.push(function(){a.EventsService.get().sendAdRequest(r.spot,r.providerName),r.pbjsInstance&&(r.pbjsInstance.setConfig(r.getConfig(e,!0)),r.addCustomConfigByProvider(e.c.c),r.adUnit&&(r.pbjsInstance.addAdUnits(r.adUnit),r.sendBidRequests(r.adUnit)),r.pbjsInstance.requestBids({adUnitCodes:[r.adUnit?r.adUnit.code:""],bidsBackHandler:function(o){return r.bidsBackHandler(o,t,e,i,n)}}))}))},t.prototype.bidsBackHandler=function(e,t,i,n,r){var o=this,s=t.container?t.container.id:"",l=this.isRefreshDfpOnly(i)?null:this.getHighestBidById(e,s);this.addGPTScriptTag(t).then(function(){var r=o.buildSizesArray(),c=o.initializeSlotSettings(r,t,i,s),u=setTimeout(function(){var r={adUnit:i.c.d.au,bidderName:"dfp",bidRate:-1,currency:"NA",isMatched:!1,size:{w:-1,h:-1},reason:"dfp_timeout"};a.EventsService.get().sendBidMatched([r],o.spot,d.Utils.getSpotCoords(o.spot)),o.logger.hbLog(e,s,o.getNoBids(s)),l?(o.destroyDFPSlots(c,null),o.handleBidSuccess(e,l,t,i,n,"dfp_timeout")):(o.sendBidMatchedEvents(s),a.EventsService.get().sendAdMatchedEvent(o.spot,o.spot.providerName||"",!1,void 0,"dfp_timeout"),n({status:"timeout"}))},i.c.d.t);c.cmd.push(function(){c.pubads().addEventListener("slotRenderEnded",function(t){if(o.isBrowsiSlot(t,s)){o.spot.spotRenderEnded++,clearTimeout(u);var r=o.getWinnerName(t,l);if(o.isForcedRefresh())return o.handleForcedRefreshSlotRenderEnded(i,t,r,n);var p=o.getSpotSizeByBidWinner(t,l);o.spot.selectedSize=d.Utils.findSizeInSpot(o.spot,p),o.sendBidMatchedEvents(s);var f={adUnit:i.c.d.au,bidderName:"dfp",bidRate:-1,currency:"NA",isMatched:o.isDfpWins(t),size:d.Utils.getDfpEventSize(t)};a.EventsService.get().sendBidMatched([f],o.spot,d.Utils.getSpotCoords(o.spot)),a.EventsService.get().sendAdMatchedEvent(o.spot,"header_bidding",!t.isEmpty,r),t.isEmpty?o.destroyDFPSlots(c,n):(o.spot.selectedSize&&(o.spot.browsiAd=Object.assign({},o.spot.browsiAd,p),o.expendAd(o.spot.selectedSize,n)),n({status:"success",args:{adUnit:"NA",provider:"header_bidding_da"}})),o.logger.hbLog(e,s,o.getNoBids(s),r,t)}})})})},t.prototype.initializeSlotSettings=function(e,t,i,n){var r=this,o=i.c.d.a,s="false"===o.upc||!o.upc,d=t.win.googletag||{};return d.cmd=d.cmd||[],d.cmd.push(function(){if(r.pbjsInstance){var l=d.defineSlot("/"+o.pubID+"/"+i.c.d.au,e,n);l.addService(d.pubads()),r.addKeyValues(i,l),d.pubads().enableSingleRequest(),d.enableServices(),r.pbjsInstance.que.push(function(){r.pbjsInstance.setTargetingForGPTAsync([n]),t.iframe?d.display(n):(googletag.display(t.wrapper?t.wrapper.id:n),googletag.pubads().refresh([l],{changeCorrelator:s}));var e={bidderName:"dfp",adUnit:i.c.d.au};a.EventsService.get().sendBidRequest([e],r.spot)}),r.spot.slot=l}}),d},t.prototype.getSpotSizeByBidWinner=function(e,t){return this.isDfpWins(e)?{w:e.size[0],h:e.size[1]}:t&&t.width&&t.height?{w:t.width,h:t.height}:{w:-1,h:-1}},t.prototype.isDfpWins=function(e){return!e.isEmpty&&!(1===e.size[0]&&1===e.size[1])},t.prototype.getWinnerName=function(e,t){if(e.isEmpty)return"NA";var i=d.Utils.getDfpEventSize(e);return 1===i.w&&1===i.h?t?t.bidder:"NA":"dfp"},t.prototype.destroyDFPSlots=function(e,t){this.spot.slot&&(e.destroySlots([this.spot.slot]),this.spot.slot=void 0),t&&t({status:"failure"})},t.prototype.isRefreshDfpOnly=function(e){return this.spot.isRefreshing()&&e.ri.do},t.prototype.isForcedRefresh=function(){return this.spot.spotRenderEnded>this.spot.attemptIndex&&!this.spot.isRefreshing()},t.prototype.handleForcedRefreshSlotRenderEnded=function(e,t,i,n){var r={adUnit:e.c.d.au,bidderName:"dfp",bidRate:-1,currency:"NA",isMatched:!t.isEmpty,size:d.Utils.getDfpEventSize(t),reason:"forced_refresh"};if(a.EventsService.get().sendBidMatched([r],this.spot,d.Utils.getSpotCoords(this.spot)),a.EventsService.get().sendAdMatchedEvent(this.spot,this.spot.providerName||"header_bidding",!t.isEmpty,i,"forced_refresh"),!t.isEmpty){var o=this.spot.selectedSize?this.spot.selectedSize.selectedEmbedding:void 0;a.EventsService.get().sendAdImpression(this.spot,this.spot.providerName||"header_bidding",o)}n({status:"success",args:{adUnit:"NA",provider:"header_bidding_da"}})},t}(o.PrebidJs);t.HeaderBiddingDA=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(28),r=i(29),o=function(){function e(){}return e.getEmbedder=function(e,t){if("header_bidding"===e.rt)return e.c.if?new r.default(t):new n.default(t);var i=e;switch(i.c.p){case"dfp":return"true"===i.c.a.inIFrame?new r.default(t):new n.default(t);case"appnexus":case"appnexus_inv_code":case"adform":case"sovrn":case"districtmdmx":case"pulsepoint":case"aol":case"openx":case"rubicon":case"smart_ad_server":case"ad_you_like":case"audiencenetwork":case"criteo":case"index_exchange":case"lockerdome":case"pubmatic":case"brealtime":case"sharethrough":case"sonobi":case"gum_gum":case"triple_lift":case"conversant":case"across":case"kargo":case"medianet":case"yieldmo":case"onemobile":case"districtm":case"adkernel":case"aja":case"yjax":case"rdn":case"dgads":return new r.default(t);default:return null}},e}();t.EmbeddingFactory=o},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.appendAndGetWrapper=function(e){var t=this;return new Promise(function(i,n){if(e.ref&&e.ref.parentNode){var r=document.createElement("div"),o=document.createElement("div");r.setAttribute("spotType",e.type),r.setAttribute("typeIndex",""+e.typeIndex),o.id=t.containerId,r.id=t.wrapperId,r.appendChild(o),r.style.display="none",t.appendAd(e,r),e.browsiAd.win=window,e.browsiAd.wrapper=r,e.browsiAd.container=o,e.browsiAd.iframe=null,i(e.browsiAd)}else n(e.browsiAd)})},t}(i(11).Embedder);t.default=o},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.appendAndGetWrapper=function(e){var t=this;return new Promise(function(i,n){if(e.ref&&e.ref.parentNode){var r=!1,o=document.createElement("div"),s=document.createElement("iframe");o.setAttribute("spotType",e.type),o.setAttribute("typeIndex",""+e.typeIndex),o.appendChild(s),o.id=t.wrapperId,s.id=t.containerId,s.scrolling="no",s.frameBorder="0",s.marginHeight="0",s.marginWidth="0",s.height="0",s.width="0",s.style.display="none",s.onload=function(){if(!r){r=!0,s.contentDocument.open(),s.contentDocument.close();var n=s.contentDocument.createElement("div");n.setAttribute("id",t.containerId),s.contentDocument.body.appendChild(n),e.browsiAd.win=s.contentWindow,e.browsiAd.wrapper=o,e.browsiAd.container=n,e.browsiAd.iframe=s,i(e.browsiAd)}},s.onerror=function(){n(e.browsiAd)},t.appendAd(e,o)}else n(e.browsiAd)})},t}(i(11).Embedder);t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(31),r=i(1),o=i(0),s=i(2),a=function(){function e(){this.SCRIPT_SRC="//z.moatads.com/browsidisplay14489870757/moatad.js",this.logger=new r.Logger("Moat Initialized")}return e.get=function(){return e._instance||(this._instance=new e),e._instance},e.prototype.generateMoatUrl=function(e){var t={moatClientLevel1:e.providerName,moatClientLevel2:s.Profiler.get().identity.siteKey,moatClientLevel3:e.fold,moatClientLevel4:e.adIndex};return this.SCRIPT_SRC+"#"+n.stringify(t)},e.prototype.injectMoat=function(e){var t=this;if(this.logger.info("injecting moat for spot "+e.adIndex),e.browsiAd.wrapper){var i=this.generateMoatUrl({providerName:e.providerName?e.providerName:"NA",fold:o.Utils.getElementFoldNumber(e.browsiAd.wrapper),adIndex:e.adIndex});o.Utils.appendScript(i,e.browsiAd).catch(function(e){return t.logger.error("failed to inject moat service.")})}},e}();t.MoatService=a},function(e,t,i){"use strict";t.decode=t.parse=i(32),t.encode=t.stringify=i(33)},function(e,t,i){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,i,o){t=t||"&",i=i||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var d=1e3;o&&"number"==typeof o.maxKeys&&(d=o.maxKeys);var l=e.length;d>0&&l>d&&(l=d);for(var c=0;c<l;++c){var u,p,f,h,g=e[c].replace(a,"%20"),m=g.indexOf(i);m>=0?(u=g.substr(0,m),p=g.substr(m+1)):(u=g,p=""),f=decodeURIComponent(u),h=decodeURIComponent(p),n(s,f)?r(s[f])?s[f].push(h):s[f]=[s[f],h]:s[f]=h}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,i){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,i,a){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),function(s){var a=encodeURIComponent(n(s))+i;return r(e[s])?o(e[s],function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[s]))}).join(t):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var i=[],n=0;n<e.length;n++)i.push(t(e[n],n));return i}var s=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(2),o=i(0),s=function(){function e(){this.logger=new n.Logger("SpotsStrategy"),this.profile=r.Profiler.get(),this.logger.custom("spots strategy: default",o.Utils.getLogStyle(18,"black","green")),this.logger.custom("Allow narrow ads to break: "+this.profile.allowNarrowBreak+", Allow narrow ads wrap: "+(this.profile.domData&&this.profile.domData.allowNarrowWrap)+" ",o.Utils.getLogStyle(18,"white","blue"))}return e.prototype.stopScanning=function(e){return this.profile.spotsConfig.ms===this.filterSpotsBy(e,"narrow","wrapped",!1).length},e.prototype.selectSpots=function(e){var t=this.profile.spotsConfig.ms,i=[],n=[],r=this.filterSpotsBy(e,"narrow","wrapped",!0,t);this.logger.debug("selected narrow spots with wrap: ",r),(t-=r.length)>0&&(i=this.filterSpotsBy(e,"narrow","break",!0,t,r),this.logger.debug("selected narrow spots with break: ",i),t-=i.length),t>0&&(n=this.filterSpotsBy(e,"wide","break",!0,t,r.concat(i)),this.logger.debug("selected wide spots with break: ",n));var s=o.Utils.sortSpotsByOffsetTop.apply(o.Utils,r.concat(i,n)).slice(0,this.profile.spotsConfig.ms);return s=this.assignWrappingDirection(s)},e.prototype.selectEmbeddings=function(e){return e.forEach(function(e){e.compatibleSizes.forEach(function(e){e.selectedEmbedding=e.optionalEmbeddings.includes("wrapped")?"wrapped":"break"})}),e},e.prototype.filterSpotsBy=function(e,t,i,n,r,o){var s=e.filter(function(e){return(!o||!o.includes(e))&&e.compatibleSizes.filter(function(e){return e.adSizeType===t&&e.optionalEmbeddings.includes(i)}).length>0});return r&&Number.isInteger(r)&&r<s.length&&(s=s.slice(0,r)),n&&(s=this.selectEmbeddings(s)),s},e.prototype.getWrapType=function(){return"random"===this.profile.spotsConfig.et?Math.random()>.5?"left":"right":this.profile.spotsConfig.et},e.prototype.assignWrappingDirection=function(e){var t=this;return e.forEach(function(e){e.compatibleSizes.forEach(function(e){"wrapped"===e.selectedEmbedding&&(e.selectedEmbedding=t.getWrapType())})}),e},e}();t.DefautlSpotsStrategy=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(0),o=function(){function e(){this.titleSelectors=["h1","h2","h3","h4","h5","h6","header"],this.titleToContentDistance=60,this.logger=new n.Logger("ContentTitle"),this.titlesOnPage=this.collectTitles(),this.titlesLocations=this.getTitlesLocations(this.titlesOnPage)}return e.get=function(){return e.instance||(this.instance=new e),e.instance},e.prototype.collectTitles=function(e){return Array.from((e||document).querySelectorAll(this.titleSelectors.join(","))).filter(function(e){return r.Utils.isVisible(e)})},e.prototype.getTitlesLocations=function(e){var t=this;return e.map(function(e){return t.getBottomOffset(e)}).filter(function(e){return e>0}).sort(function(e,t){return e-t})},e.prototype.isTitle=function(e){return-1!=this.titlesOnPage.indexOf(e)},e.prototype.isBetweenTitleAndContent=function(e){var t=r.Utils.getElementPosition(e).y;if(t<1)return!1;if(this.isTitle(e)){var i=this.getBottomOffset(e),n=this.titlesLocations.indexOf(i);if(n&&this.titlesLocations[n-1])return t-this.titlesLocations[n-1]<this.titleToContentDistance}for(var o=this.titlesLocations.length;o>=0;o--)if(t>this.titlesLocations[o])return t-this.titlesLocations[o]<this.titleToContentDistance;return!1},e.prototype.getBottomOffset=function(e){return r.Utils.getElementPosition(e).y+r.Utils.getElementSize(e).h},e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(0),o=i(3),s=i(2),a=i(6),d=function(){function e(){this.isSubscribed=!1,this.timeoutObjId=null,this.logger=new n.Logger("EngagementService"),this.logger.info("initializing"),this.engagementCounter=0,this.lastScrollingDistance=0,this.lastEngagementReport=0,this.engagementsCounter=0,this.eventsBatchCounter=0,this.engagementsBatch=[],this.profile=s.Profiler.get(),this.isHidden=!1,this.hiddenTime=0,this.hiddenTimeDelta=0,this.outOfFocusTime=0,a.Focus.instance.subscribe(this.onFocusChanged.bind(this))}return e.get=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.subscribe=function(){var e=this;if(this.isSubscribed)this.logger.info("Already subscribed!");else{this.isSubscribed=!0;var t=r.Utils.getLoaderParams().e.tber||2;this.setEventInterval(),this.timeoutObjId=setTimeout(function(){e.eventsSender(t)},1e3*t)}},e.prototype.setEventInterval=function(){var e=this;this.eventSenderInterval=setInterval(function(){e.isSubscribed||clearInterval(e.eventSenderInterval),e.isHidden||(e.eventsBatchCounter++,e.engagementsCounter++,e.engagementsBatch.push(e.buildEngagementData()))},1e3)},e.prototype.unsubscribe=function(){this.isSubscribed=!1,a.Focus.instance.unsubscribe(),this.timeoutObjId&&clearTimeout(this.timeoutObjId)},e.prototype.buildEngagementData=function(){var e=Date.now(),t=r.Utils.getScrollingDistance()-this.lastScrollingDistance,i=Math.abs(this.lastScrollingDistance?t:0),n=this.getTimeDelta(e),o={et:"general_engagement",c:this.engagementsCounter,dep:r.Utils.getScrollDepthPercentages(),po:r.Utils.getScrollingDistance(),pl:r.Utils.getPageHeight(),td:n,pd:i,sl:r.Utils.getWindowHeight(),now:r.Utils.getNowInSeconds(),lt:this.getLoadTime(),plt:this.getPageLoadTime(),to:r.Utils.getTimeOffset(),top:this.getTimeOnPage(),mcst:this.profile.domData?this.profile.domData.mainContent.start:-1,mcs:r.Utils.getMainContentSize(this.profile.domData),v:Math.round(i/(n/1e3))||0};return this.lastScrollingDistance=r.Utils.getScrollingDistance(),this.lastEngagementReport=e,o},e.prototype.eventsSender=function(e){var t=this;this.isSubscribed&&(!this.isHidden&&this.engagementsBatch.length>0&&(e=this.calculateNextEventSend(e),o.EventsService.get().sendEngagementReportEvent(this.engagementsBatch),this.engagementsBatch=[]),this.timeoutObjId=setTimeout(function(){t.eventsSender(e)},1e3*e))},e.prototype.calculateNextEventSend=function(e){return this.eventsBatchCounter>=60&&(this.eventsBatchCounter=0,e+=2),(r.Utils.getTimeOffset()/1e3>=600||!r.Utils.getCookie("__browsiSessionID"))&&this.unsubscribe(),e},e.prototype.getTimeOnPage=function(){var e=r.Utils.getTimeOffset()/1e3,t=this.outOfFocusTime/1e3;return Number((e-t).toFixed(2))},e.prototype.getTimeDelta=function(e){var t=this.lastEngagementReport?e-this.lastEngagementReport:0;return this.hiddenTimeDelta>0&&(t=this.hiddenTimeDelta,this.hiddenTimeDelta=0),t},e.prototype.getLoadTime=function(){try{if(window.performance&&window.performance.timing.navigationStart>0&&window.performance.timing.domInteractive>0)return Math.floor(window.performance.timing.domInteractive-window.performance.timing.navigationStart)}catch(e){}return-1},e.prototype.getPageLoadTime=function(){try{if("complete"===document.readyState&&window.performance&&window.performance.timing.loadEventEnd>0&&window.performance.timing.domContentLoadedEventStart>0)return Math.floor(Math.abs(window.performance.timing.loadEventEnd-window.performance.timing.domContentLoadedEventStart))}catch(e){}return-1},e.prototype.onFocusChanged=function(e){if(this.isHidden=e,e)this.hiddenTime=Date.now(),clearInterval(this.eventSenderInterval);else{this.hiddenTime>0&&(this.outOfFocusTime=this.outOfFocusTime+(Date.now()-this.hiddenTime));var t=Date.now(),i=t-this.hiddenTime;this.hiddenTimeDelta=this.lastEngagementReport?t-this.lastEngagementReport-i:0,this.logger.info("Out Of focus time: "+this.outOfFocusTime/1e3+" seconds, time on page: "+this.getTimeOnPage()),this.setEventInterval()}},e}();t.EngagementService=d},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Logger_1=__webpack_require__(1),Utils_1=__webpack_require__(0),ProvidersDetector_1=__webpack_require__(14),Profiler_1=__webpack_require__(2),DfpDetector=function(){function DfpDetector(){this.minAdSize=5,this.logger=new Logger_1.Logger("Dfp Detector"),this.googletag=window.googletag||{},this.googletag.cmd=this.googletag.cmd||[],this.isActive=!1}return DfpDetector.start=function(){this.instance?this.instance.logger.info("already started"):(this.instance=new DfpDetector,this.instance.logger.info("starting"),this.instance.run())},DfpDetector.restart=function(){this.instance?this.instance.checkFetchedSlots():this.start()},DfpDetector.setInactive=function(){this.instance.isActive=!1},DfpDetector.prototype.run=function(){this.isActive=!0,this.listenToLazyAds(),this.checkFetchedSlots()},DfpDetector.prototype.checkFetchedSlots=function(){var e=this;this.logger.debug("checkFetchedSlots"),this.checkCurrentSlots(),setTimeout(function(){return e.checkCurrentSlots()},1e3)},DfpDetector.prototype.checkCurrentSlots=function(){var e=this;this.logger.debug("checking current slots"),this.googletag.cmd.push(function(){e.googletag.pubads().getSlots().forEach(function(t){var i=document.getElementById(t.getSlotElementId());if(i){var n=e.resolveInnerMostSingleChild(i),r=Utils_1.Utils.getElementSize(n);e.validationPassed(i,t)&&t.getResponseInformation()&&(e.isRendered(n,r)?ProvidersDetector_1.default.get().addFoundProvider(i,e.getProviderType(t),!0,e.getPlacementId(t),t.getAdUnitPath(),!1,t,r):e.handleThirdPartySlowAdRendering(i,t,!1))}})})},DfpDetector.prototype.getProviderType=function(e){var t=e.getTargetingKeys();return-1!=t.indexOf("hb_pb")&&-1!=t.indexOf("hb_size")?"header_bidding":"dfp"},DfpDetector.prototype.isRendered=function(e,t){return Utils_1.Utils.isVisible(e)&&this.isValidSize(t)},DfpDetector.prototype.listenToLazyAds=function(){var e=this;this.googletag.cmd.push(function(){e.googletag.pubads().addEventListener("slotRenderEnded",function(t){if(t=t,e.isActive&&!t.isEmpty){var i=document.getElementById(t.slot.getSlotElementId());if(i){var n=e.resolveInnerMostSingleChild(i);e.validationPassed(i,t.slot)?e.isRendered(n,t.size)?ProvidersDetector_1.default.get().addFoundProvider(i,e.getProviderType(t.slot),!1,e.getPlacementId(t.slot),t.slot.getAdUnitPath(),!0,t.slot,Utils_1.Utils.getDfpEventSize(t)):e.handleThirdPartySlowAdRendering(i,t.slot,!0):e.isForcedRefreshed(i,t.slot)&&ProvidersDetector_1.default.get().addFoundProvider(i,e.getProviderType(t.slot),!1,e.getPlacementId(t.slot),t.slot.getAdUnitPath(),!0,t.slot,Utils_1.Utils.getDfpEventSize(t),!0)}}})})},DfpDetector.prototype.handleThirdPartySlowAdRendering=function(e,t,i){var n=this;this.waitForDeflating(e).then(function(r){n.logger.debug("deflated to ",r,e),ProvidersDetector_1.default.get().addFoundProvider(e,n.getProviderType(t),!1,n.getPlacementId(t),t.getAdUnitPath(),i,t,r)}).catch(function(t){return n.logger.debug("did not deflate",t,e)})},DfpDetector.prototype.validationPassed=function(e,t){return!this.isBrowsiAd(t)&&!ProvidersDetector_1.default.get().isDetectedAlready(e)},DfpDetector.prototype.isBrowsiAd=function(e){var t=e.getSlotElementId();return/^browsi_ad.*_ai_\d_ati_\d.*$/.test(t)},DfpDetector.prototype.isValidSize=function(e){return Array.isArray(e)?e[0]>this.minAdSize&&e[1]>this.minAdSize:e.w>this.minAdSize&&e.h>this.minAdSize},DfpDetector.prototype.resolveAdSize=function(e){for(var t,i=e;1===(t=this.getNonScriptChildren(i)).length;)i=t[0];return Utils_1.Utils.getElementSize(i)},DfpDetector.prototype.resolveInnerMostSingleChild=function(e){for(var t,i=e;1===(t=this.getNonScriptChildren(i)).length;)i=t[0];return i},DfpDetector.prototype.getNonScriptChildren=function(e){return Array.from(e.children).filter(function(e){return"SCRIPT"!==e.tagName})},DfpDetector.prototype.waitForDeflating=function(e){var t=this;return new Promise(function(i,n){var r=10;t.logger.debug("waiting for deflation",e);var o=setInterval(function(){var s=t.resolveAdSize(e);t.isValidSize(s)&&(clearInterval(o),i(s)),r--||(clearInterval(o),n(s))},500)})},DfpDetector.prototype.isForcedRefreshed=function(e,t){return!this.isBrowsiAd(t)&&ProvidersDetector_1.default.get().isDetectedAlready(e)},DfpDetector.prototype.getPlacementId=function(slot){var macro=Profiler_1.Profiler.get().placementIdMacro;if(macro)try{var macroResult=eval(macro.replace(/<DIV_ID>/g,""+slot.getSlotElementId()).replace(/<AD_UNIT>/g,""+slot.getAdUnitPath()).replace(/<KEY_(\w+)>/g,function(e,t){return t&&slot.getTargeting(t).join("_")||"NA"}));return this.logger.info("macro result: "+macro+" => "+macroResult),macroResult}catch(e){this.logger.error("failed to evaluate: "+macro)}return slot.getSlotElementId()},DfpDetector}();exports.default=DfpDetector},function(e,t){var i,n,r,o;if(Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,i=Object(this),n=i.length>>>0,r=0;if(arguments.length>=2)t=arguments[1];else{for(;r<n&&!(r in i);)r++;if(r>=n)throw new TypeError("Reduce of empty array with no initial value");t=i[r++]}for(;r<n;)r in i&&(t=e(t,i[r],r,i)),r++;return t}}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],r=arguments.length>=2?arguments[1]:void 0,o=0;o<i;o++)if(o in t){var s=t[o];e.call(r,s,o,t)&&n.push(s)}return n}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<i;){var o=t[r];if(e.call(n,o,r,t))return o;r++}}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},writable:!0,configurable:!0}),Array.from||(Array.from=(i=Object.prototype.toString,n=function(e){return"function"==typeof e||"[object Function]"===i.call(e)},r=Math.pow(2,53)-1,o=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),r)},function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,r=arguments.length>1?arguments[1]:void 0;if(void 0!==r){if(!n(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var s,a=o(t.length),d=n(this)?Object(new this(a)):new Array(a),l=0;l<a;)s=t[l],d[l]=r?void 0===i?r(s,l):r.call(i,s,l):s,l+=1;return d.length=a,d})),Array.prototype.some||(Array.prototype.some=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),i=t.length>>>0,n=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)if(r in t&&e.call(n,t[r],r,t))return!0;return!1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;var r,o,s=0|t,a=Math.max(s>=0?s:n-Math.abs(s),0);for(;a<n;){if((r=i[a])===(o=e)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;a++}return!1}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<i;){var o=t[r];if(e.call(n,o,r,t))return r;r++}return-1},configurable:!0,writable:!0}),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},"function"!=typeof window.CustomEvent){window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}}}]);